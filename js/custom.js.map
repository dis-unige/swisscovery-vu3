{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/41SLSP_UGE-TG/js/main.js","primo-explore/custom/41SLSP_UGE-TG/js/pickup-anywhere-form-after/pickup-anywhere-form-after.module.js","primo-explore/custom/41SLSP_UGE-TG/js/pickup-anywhere-form-after/slsp-rapido-hide-library/slsp-rapido-hide-library.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/pickup-anywhere-form-after/slsp-rapido-hide-library/slsp-rapido-hide-library.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-alma-other-members-after/prm-alma-other-members-after.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-alma-other-members-after/slsp-collapse-other-inst/slsp-collapse-other-inst.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-alma-other-members-after/slsp-collapse-other-inst/slsp-collapse-other-inst.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-alma-other-members-after/slsp-icon-label-other-members/slsp-icon-label-other-members.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-alma-other-members-after/slsp-icon-label-other-members/slsp-icon-label-other-members.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-alma-viewit-items-after/prm-alma-viewit-items-after.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-alma-viewit-items-after/slsp-icon-label-viewit-items/slsp-icon-label-viewit-items.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-alma-viewit-items-after/slsp-icon-label-viewit-items/slsp-icon-label-viewit-items.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-full-view-after/prm-full-view-after.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-full-view-after/slsp-icon-label/slsp-icon-label.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-full-view-after/slsp-icon-label/slsp-icon-label.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-loan-after/slsp-loan-after.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-loan-after/slsp-renew-item-text/slsp-renew-item-text.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-loan-after/slsp-renew-item-text/slsp-renew-item-text.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-location-items-after/eth-location-items-after.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-location-items-after/eth-mapongo/eth-config.service.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-location-items-after/eth-mapongo/eth-mapongo-check.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-location-items-after/eth-mapongo/eth-mapongo-check.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-location-items-after/eth-mapongo/eth-mapongo-libraries.service.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-location-items-after/eth-mapongo/eth-mapongo.config.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-location-items-after/eth-mapongo/eth-mapongo.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-location-items-after/eth-mapongo/eth-mapongo.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-location-items-after/slsp-i-button/slsp-i-button.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-location-items-after/slsp-i-button/slsp-i-button.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-location-items-after/slsp-icon-label-location-items/slsp-icon-label-location-items.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-location-items-after/slsp-icon-label-location-items/slsp-icon-label-location-items.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-locations-after/eth-locations-after.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-locations-after/eth-locations-filter/eth-locations-filter.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-locations-after/eth-locations-filter/eth-locations-filter.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-locations-after/slsp-collapse-related/slsp-collapse-related.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-locations-after/slsp-collapse-related/slsp-collapse-related.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-locations-after/slsp-icon-label-locations/slsp-icon-label-locations.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-locations-after/slsp-icon-label-locations/slsp-icon-label-locations.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-personal-info-after/slsp-edit-personal-details/slsp-edit-personal-details.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-personal-info-after/slsp-edit-personal-details/slsp-edit-personal-details.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-personal-info-after/slsp-personal-info-after.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-request-after/bcu-fees-link/bcu-fees-link.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-request-after/bcu-fees-link/bcu-fees-link.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-request-after/slsp-alma-request/slsp-alma-request.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-request-after/slsp-alma-request/slsp-alma-request.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-request-after/slsp-request-after.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-requests-after/slsp-request-cancel-button/slsp-request-cancel-button.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-requests-after/slsp-request-cancel-button/slsp-request-cancel-button.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-requests-after/slsp-requests-after.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-search-bar-after/bcu-search-bar-after.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-search-bar-after/bcu-search-slots/bcu-search-slots.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-search-bar-after/bcu-search-slots/bcu-search-slots.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-service-button-after/prm-service-button-after.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-service-button-after/slsp-digitization-button-label/slsp-digitization-button-label.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-service-button-after/slsp-digitization-button-label/slsp-digitization-button-label.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-service-ngrs-after/bcu-rapido-no-further-options/bcu-rapido-no-further-options.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-service-ngrs-after/bcu-rapido-no-further-options/bcu-rapido-no-further-options.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-service-ngrs-after/prm-service-ngrs-after.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-service-ngrs-after/slsp-rapido-fees-link/slsp-rapido-fees-link.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-service-ngrs-after/slsp-rapido-fees-link/slsp-rapido-fees-link.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-service-physical-best-offer-after/eth-disable-request-button/eth-disable-request-button.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-service-physical-best-offer-after/eth-disable-request-button/eth-disable-request-button.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-service-physical-best-offer-after/prm-service-physical-best-offer-after.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-service-physical-best-offer-after/slsp-icon-label-rapido/slsp-icon-label-rapido.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-service-physical-best-offer-after/slsp-icon-label-rapido/slsp-icon-label-rapido.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-service-physical-best-offer-after/slsp-rapido-digital-offer/slsp-rapido-digital-offer.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-service-physical-best-offer-after/slsp-rapido-digital-offer/slsp-rapido-digital-offer.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-tabs-and-scopes-selector-after/bcu-scopes-selector/bcu-scopes-selector.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-tabs-and-scopes-selector-after/bcu-scopes-selector/bcu-scopes-selector.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-tabs-and-scopes-selector-after/bcu-tabs-and-scopes-selector-after.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-user-area-expandable-after/bcu-lang-switch/bcu-lang-switch.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-user-area-expandable-after/bcu-lang-switch/bcu-lang-switch.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-user-area-expandable-after/slsp-ill-signin-order-logged-out/slsp-ill-signin-order-logged-out.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-user-area-expandable-after/slsp-ill-signin-order-logged-out/slsp-ill-signin-order-logged-out.module.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-user-area-expandable-after/slsp-ill-signin-order-logged-out/slsp-ill-signin-order-logged-out.service.js","primo-explore/custom/41SLSP_UGE-TG/js/prm-user-area-expandable-after/slsp-user-area-expandable-after.module.js","primo-explore/custom/41SLSP_UGE-TG/js/slsp-archives-htgi/index.js","primo-explore/custom/41SLSP_UGE-TG/js/slsp-archives-htgi/js/slsp-archives-htgi.module.js","primo-explore/custom/41SLSP_UGE-TG/js/slsp-archives-viewit/index.js","primo-explore/custom/41SLSP_UGE-TG/js/slsp-archives-viewit/js/slsp-archives-viewit.module.js","primo-explore/custom/41SLSP_UGE-TG/js/slsp-http-intercept-pickup-information/index.js","primo-explore/custom/41SLSP_UGE-TG/js/slsp-http-intercept-pickup-information/js/slsp-http-intercept-pickup-information.module.js","primo-explore/custom/41SLSP_UGE-TG/js/slsp-http-intercept-requests/index.js","primo-explore/custom/41SLSP_UGE-TG/js/slsp-http-intercept-requests/js/slsp-http-intercept-requests.module.js","primo-explore/custom/41SLSP_UGE-TG/js/slsp-ill-signin-order-alert/index.js","primo-explore/custom/41SLSP_UGE-TG/js/slsp-ill-signin-order-alert/js/slsp-ill-signin-order-alert.module.js","primo-explore/custom/41SLSP_UGE-TG/js/unige-bib-news/module/unige-bib-news.config.js","primo-explore/custom/41SLSP_UGE-TG/js/unige-bib-news/module/unige-bib-news.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/unige-bib-news/module/unige-bib-news.service.js","primo-explore/custom/41SLSP_UGE-TG/js/unige-bib-news/module/unige-config.service.js","primo-explore/custom/41SLSP_UGE-TG/js/unige-bib-news/unige-bib-news.module.js","primo-explore/custom/41SLSP_UGE-TG/js/unige-eth-metagrid/index.js","primo-explore/custom/41SLSP_UGE-TG/js/unige-eth-metagrid/primo-explore-eth-metagrid/js/eth-metagrid.config.js","primo-explore/custom/41SLSP_UGE-TG/js/unige-eth-metagrid/primo-explore-eth-metagrid/js/eth-metagrid.controller.js","primo-explore/custom/41SLSP_UGE-TG/js/unige-eth-metagrid/primo-explore-eth-metagrid/js/eth-metagrid.module.js","primo-explore/custom/41SLSP_UGE-TG/js/unige-eth-metagrid/primo-explore-eth-metagrid/js/eth-metagrid.service.js","primo-explore/custom/41SLSP_UGE-TG/js/unige-ill-open-url/index.js","primo-explore/custom/41SLSP_UGE-TG/js/unige-ill-open-url/js/unige-ill-open-url.module.js","primo-explore/custom/41SLSP_UGE-TG/js/unige-non-circulating-label/index.js","primo-explore/custom/41SLSP_UGE-TG/js/unige-non-circulating-label/js/unige-non-circulating-label.module.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","angular","_slspRapidoHideLibrary","pickupAnywhereFormAfterModule","component","bindings","parentCtrl","template","requires","push","slspRapidoHideLibraryModule","name","slspRapidoHideLibraryController","$scope","this","afterCtrl","$watch","pickupLibraryArray","isArray","forEach","library","value","console","log","error","message","$inject","controller","_slspCollapseOtherInst","_slspIconLabelOtherMembers","prmAlmaOtherMembersAfterModule","slspCollapseOtherInstModule","slspIconLabelOtherMembersModule","slspCollapseOtherInstController","$compile","noItemAtPickupLocation","serviceMode","isCollapsed","availabilityType","document","querySelectorAll","element","prepend","addClass","slspIconLabelOtherMembersController","$timeout","_this","iconLabelOtherMembersE","iconLabelOtherMembersP2","_slspIconLabelViewitItems","prmAlmaViewitItemsAfterModule","slspIconLabelViewitItemsModule","slspIconLabelViewitItemsController","iconLabelViewitItems","iconLabelRidOff","serviceType","detach","_slspIconLabel","prmFullViewAfterModule","slspIconLabelModule","slspIconLabelController","_slspRenewItemText","slspLoanAfterModule","slspRenewItemTextModule","slspRenewItemTextController","getRenewText","undefined","item","renewstatuses","renewstatus","_ethMapongoCheck","_ethMapongo","_slspIButton","_slspIconLabelLocationItems","ethLocationItemsAfterModule","ethMapongoCheckModule","ethMapongoModule","slspIButtonModule","slspIconLabelLocationItemsModule","ethConfigService","$rootScope","getLanguage","sms","$$childHead","$ctrl","userSessionManagerService","getUserLanguage","$window","appConfig","interfaceLanguage","getLabel","config","key","lang","label","getUrl","url","ethMapongoCheckController","$element","ethMapongoLibrariesService","isMapongoLibrary","noLocationItemAfter","locationItemAfter","parentElement","getElementsByTagName","loc","location","libraryCode","aPrmLocationItemAfter","slice","recordid","pnx","control","sourcerecordid","items","addCallnumberEntry","barcodeEntry","prmLocationItemAfter","querySelector","isMapongoSubLocation","_additionalData","secondarylocationname","isAvailable","itemstatusname","subLocationCode","getSubLocationCode","callnumber","fullItemFields","filter","indexOf","addCallnumber","replace","barcode","append","_ethMapongoLibraries","factory","libraries","shortname","baseUrl","locationCodeWhiteList","locationWhiteList","availabilityStatus","l","subLocation","getBaseUrl","lib","filterLibraries","s","ethMapongoConfig","qrc","de","en","fr","ethMapongoController","src","encodeURIComponent","sublocation","_ethConfig","_ethMapongo2","slspIButtonController","getLibrary","currLoc","librarycodeTranslation","getLibraryCode","$location","$$search","biblinkText","biblinkBase","slspIconLabelLocationItemsController","iconLabelLocationItems","iconLabelLocationItems3","iconLabelLocationItems2","serviceScrollId","_ethLocationsFilter","_slspIconLabelLocations","_slspCollapseRelated","ethLocationsAfterModule","ethLocationsFilterModule","slspIconLabelLocationsModule","slspCollapseRelatedModule","ethLocationsFilterController","newValue","oldValue","scope","isLocationsFilterVisible","slspCollapseRelatedController","locations","relatedLocationsListLimit","slspIconLabelLocationsController","iconLabelLocations","iconLabelLocations3","iconLabelLocations2","slspEditPersonalDetailsController","$root","getInterfaceLanguage","detailsBaseEdu","detailsBaseReg","exclude","grpA","grpB","getPatronGrp","patron","personalInfoService","personalInfo","patronstatus","registration","institution","patronstatuscode","includes","grpLabelA","labelA","grpLabelB","labelB","buttonMove","_slspEditPersonalDetails","slspEditPersonalDetailsModule","slspPersonalInfoAfterModule","bcuFeesLinkController","form","display","info","children","createElement","className","innerHTML","$translate","instant","insertBefore","_bcuFeesLink","bcuFeesLinkModule","slspAlmaRequestController","requestLoan","requestDigi","removeClass","_slspAlmaRequest","slspAlmaRequestModule","slspRequestAfterModule","slspRequestCancelButtonController","currentRequestArray","request","requestType","statusCode","isCancelable","_slspRequestCancelButton","slspRequestCancelButtonModule","slspRequestsAfterModule","_bcuSearchSlots","bcuSearchBarAfterModule","bcuSearchSlotsModule","bcuSearchSlotsController","showTabsAndScopes","_slspDigitizationButtonLabel","prmServiceButtonAfterModule","slspDigitizationButtonLabelModule","slspDigitizationButtonLabelController","digiButtonLabel","_digiButtonLabel","digiItemButtonLabel","service","type","after","bcuRapidoNoFurtherOptionsController","msg","almaRSServiceAvailable","isi","isSignedIn","rapidoSection","getElementById","rapidoTOC","hasClass","_bcuRapidoNoFurtherOptions","bcuRapidoNoFurtherOptionsModule","_slspRapidoFeesLink","prmServiceNgrsAfterModule","slspRapidoFeesLinkModule","slspRapidoFeesLinkController","rapidoFeesLink","html","ethDisableRequestButtonController","processDoCheck","requestButton","attr","_ethDisableRequestButton","ethDisableRequestButtonModule","_slspRapidoDigitalOffer","_slspIconLabelRapido","prmServicePhysicalBestOfferAfterModule","slspRapidoDigitalOfferModule","slspIconLabelRapidoModule","slspIconLabelRapidoController","iconLabel","iconLabel2","isdigitaloffer","slspRapidoDigitalOfferController","isDone","tilesplaceholderactive","rapidoCosts","bestoffer","unavailableInAllMembersPod","unavailableResource","reservation","podId","readingRoomPod","bcuScopesSelectorController","setTimeout","searchScopes","_typeof","onclick","getElementsByClassName","click","_bcuScopesSelector","bcuScopesSelectorModule","bcuTabsAndScopesSelectorAfterModule","bcuLangSwitchController","$parent","parent","languages","changeLanguage","changeLangService","addLangParamToUrl","i18nService","setLanguage","then","$state","go","current","reload","_bcuLangSwitch","bcuLangSwitchModule","slspIllSigninOrderLoggedOutController","slspIllSigninOrderLoggedOutService","usrNme","isGuest","_slspIllSigninOrderLoggedOut","_slspIllSigninOrderLoggedOut2","slspIllSigninOrderLoggedOutModule","jwtHelper","getDecodedToken","jwt","sessionStorage","getItem","decodeToken","decodedToken","userName","userGroup","slspUserAreaExpandableAfterModule","$onInit","sourceid","guid","source","classList","add","originalsourceid","substring","lastIndexOf","delivery","GetIt1","links","isLinktoOnline","link","translation","fullView","text","availabilityLine","changeButton","result","changeButtonText","$doCheck","button","slspHttpInterceptPickupInformation","$httpProvider","interceptors","$q","_request","requestError","reject","responseError","response","_response","test","jwtUtilService","data","personalDelivery","slspHttpInterceptRequests","status","injector","get","window","list_of_hold_states","it","list_of_photocopy_states","Object","keys","list_of_hold_states_regexp","RegExp","map","m","toLowerCase","join","holds","hold","holdstatus","cancel","list_of_photocopy_states_regexp","photocopies","photocopy","requeststatus","vm","getAlert","ga","almaHowToGetitService","reqAlert","_htmlMsg","myEl2","unigeBibNewsConfig","heading","more","all","unigeBibNewsController","$sce","unigeConfigService","unigeBibNewsService","getNews","allNewsUrl","news","entries","div","trustAsHtml","textContent","$http","trustAsResourceUrl","headers","X-From-ExL-API-Gateway","httpError","errorMessage","_unigeConfig","_unigeBibNews","_unigeBibNews2","_unigeBibNews3","unigeBibNewsModule","ethMetagridConfig","whitelist","hallernet","fotostiftung","sikart","elites-suisses-au-xxe-siecle","bsg","dodis","helveticat","hls-dhs-dss","histoirerurale","lonsea","ssrq","alfred-escher","geschichtedersozialensicherheit","ethMetagridController","ethMetagridService","provider","id","getConcordances","concordances","resources","metagridId","persons","find","x","person","whitelistedMetagridLinks","whitelistedMetagridLinksSorted","metadata","last_name","first_name","j","resource","slug","uri","concat","hls","rest","metagridLinks","lds03","lds90","gndIds","idrefIds","isDefined","part","_part","_i","_part2","_part3","_i2","gndId","buildMetalinkLinks","idrefId","_ethMetagrid","_ethMetagrid2","_ethMetagrid3","ethMetagridModule","metagridService","baseurl","request_service","path","search","requestService","formFields","param_map","openurl_param","comment","fields","_defineProperty","_param_map","title","articleTitle","journalTitle","formData","events","onClick","field","pages_range","author","isLoggedIn","itemLocations","itemFields","itemcategoryname"],"mappings":"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EU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAGU,mBAAlBD,EAAQC,OAEU,mBAAlBD,EAAQC,OAEU,mBAAlBD,EAAQC,OAEU,mBAAlBD,EAAQC,OAEU,mBAAlBD,EAAQC,OAEU,mBAAlBD,EAAQC,OAEU,mBAAlBD,EAAQC,OAEU,mBAAlBD,EAAQC,OAEU,mBAAlBD,EAAQC,OAEU,mBAAlBD,EAAQC,OAEU,wBAAlBD,EAAQC,OAEU,mBAAlBD,EAAQC,OAEU,mBAAlBD,EAAQC,OAGU,oBAAlBD,EAAQC,OAGU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAGU,oBAAlBD,EAAQC,OAGU,oBAAlBD,EAAQC,OAGU,oBAAlBD,EAAQC,OAGU,qBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,qBAAlBD,EAAQC,OAEU,qBAAlBD,EAAQC,OAEU,qBAAlBD,EAAQC,OAGU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAEU,oBAAlBD,EAAQC,OAGU,oBAAlBD,EAAQC,OAEU,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","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","//import './slsp-courier-info';\nimport './slsp-ill-signin-order-alert';\nimport './prm-locations-after';\nimport './prm-location-items-after';\nimport './slsp-archives-htgi';\nimport './slsp-archives-viewit';\nimport './slsp-http-intercept-requests';\nimport './prm-user-area-expandable-after';\nimport './prm-loan-after';\nimport './prm-personal-info-after';\nimport './prm-alma-other-members-after';\nimport './prm-service-ngrs-after';\nimport './prm-service-physical-best-offer-after';\nimport './slsp-http-intercept-pickup-information';\nimport './prm-search-bar-after';\nimport './prm-tabs-and-scopes-selector-after';\nimport './prm-service-button-after';\nimport './prm-full-view-after';\nimport './prm-request-after';\nimport './prm-requests-after';\nimport './prm-alma-viewit-items-after';\nimport './pickup-anywhere-form-after';\nimport './unige-bib-news';\nimport './unige-ill-open-url';\nimport './unige-eth-metagrid';\nimport './unige-non-circulating-label';\n\nvar app = angular.module('centralCustom', ['angularLoad', 'slspIllSigninOrderAlert', 'ethLocationsAfterModule', 'ethLocationItemsAfterModule', 'slspArchivesHtgi', 'slspArchivesViewit', 'slspHttpInterceptRequests', 'slspUserAreaExpandableAfterModule', 'slspLoanAfterModule', 'slspPersonalInfoAfterModule', 'prmAlmaOtherMembersAfterModule', 'prmServiceNgrsAfterModule', 'prmServicePhysicalBestOfferAfterModule', 'slspHttpInterceptPickupInformation', 'bcuSearchBarAfterModule', 'bcuTabsAndScopesSelectorAfterModule', 'prmServiceButtonAfterModule', 'prmFullViewAfterModule', 'slspRequestAfterModule', 'slspRequestsAfterModule', 'prmAlmaViewitItemsAfterModule', 'pickupAnywhereFormAfterModule', 'unigeBibNewsModule','unigeIllOpenUrl','unigeNonCirculatingLabel']);","import { slspRapidoHideLibraryModule } from './slsp-rapido-hide-library/slsp-rapido-hide-library.module';\n\nexport const pickupAnywhereFormAfterModule = angular\n    .module('pickupAnywhereFormAfterModule', [])\n    .component('pickupAnywhereFormAfter', {\n        bindings: { parentCtrl: '<' },\n        template: `\n            <slsp-rapido-hide-library-component after-ctrl=\"$ctrl\"></slsp-rapido-hide-library-component>\n            <slsp-pickup-anywhere-form-after parent-ctrl=\"$parent.$ctrl\"></<slsp-pickup-anywhere-form-after>`\n    });\n\n\npickupAnywhereFormAfterModule.requires.push(slspRapidoHideLibraryModule.name);","//-----------------RapidoHideLibrary------------------------------\n\nexport class slspRapidoHideLibraryController {\n\n    constructor($scope) {\n        this.$scope = $scope;\n    }\n\n    $onInit() {\n        try {\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n            this.$scope.$watch('this.$ctrl.afterCtrl.parentCtrl.pickupLibraryField.options', (pickupLibraryArray) => {\n                if (angular.isArray(pickupLibraryArray))\n                    angular.forEach(pickupLibraryArray, (library) => {\n\n                        if (\n                            //UBS-----------------------------\n                            //UBH Fernleihe\n                            library.value === '12900830000231' ||\n                            //Aaarau\n                            library.value === '112074320005504' ||\n                            //Swiss TPH\n                            library.value === '112070130005504' ||\n                            //BZG Gesundheit\n                            library.value === '112073630005504' ||\n                            //Mission 21\n                            library.value === '112058770005504' ||\n                            //Ges. f. Volkskunde\n                            library.value === '112056850005504' ||\n                            //Autographensammlung Geigy-Hagenbach\n                            library.value === '11304577870005504' ||\n                            //Anglistik\n                            library.value === '112062250005504' ||\n                            //Maiengasse\n                            library.value === '112067110005504' ||\n                            //Gender studies\n                            library.value === '112074910005504' ||\n                            //Geographie\n                            library.value === '112068850005504' ||\n                            //Kulturwissenschaft\n                            library.value === '112062530005504' ||\n                            //Mathematik\n                            library.value === '112057620005504' ||\n                            //Slavistik\n                            library.value === '112071430005504' ||\n                            //Soziologie\n                            library.value === '112061840005504' ||\n                            //Studienberatung\n                            library.value === '112074090005504' ||\n                            //Frauenfeld\n                            library.value === '112068670005504' ||\n                            //Schaulager\n                            library.value === '112075370005504' ||\n                            //St Gallen Stift\n                            library.value === '112061200005504' ||\n                            //St Gallen Vadiana\n                            library.value === '112063910005504' ||\n                            //Trogen\n                            library.value === '112066290005504' ||\n                            //Zofingen\n                            library.value === '112067340005504' ||\n                            //UBE-------------------------------\n                            //BEWI\n                            library.value === '112056880005511' ||\n                            //Geographie\n                            library.value === '112061350005511' ||\n                            //JFB\n                            library.value === '112062500005511' ||\n                            //Medizingeschichte\n                            library.value === '112062730005511' ||\n                            //Muesmatt\n                            library.value === '112061810005511' ||\n                            //Pflanzenwissenschaft\n                            library.value === '112060560005511' ||\n                            //Public Health\n                            library.value === '112063750005511' ||\n                            //Speichermagazin\n                            library.value === '112063420005511' ||\n                            //Sportwissenschaft\n                            library.value === '112057320005511' ||\n                            //Vetsuisse\n                            library.value === '112062040005511' ||\n                            //Weiterbildung ZUW\n                            library.value === '112057550005511' ||\n                            //Wirschaftswissenschaften\n                            library.value === '112060330005511' ||\n                            //Zahnmedizin\n                            library.value === '112062270005511' ||\n                            //Bibliothek für Gestaltung Bern\n                            library.value === '112047360005527' ||\n                            //Bildungszentrum Pflege Online\n                            library.value === '112048510005527' ||\n                            //Campus Muristalden Bern\n                            library.value === '112046900005527' ||\n                            //Gosteli-Stiftung\n                            library.value === '112048690005527' ||\n                            //Naturhistorisches Museum Bern Bibliothek\n                            library.value === '112047820005527' ||\n                            //Staatsarchiv des Kantons Bern\n                            library.value === '112048280005527' ||\n                            //Alexandria------------------------\n                            //Musikautomaten\n                            library.value === '13298420001791' ||\n                            //Vela\n                            library.value === '13294580001791' ||\n                            //RUAG\n                            library.value === '13293660001791' ||\n                            //SECO\n                            library.value === '13293890001791' ||\n                            //BAR\n                            library.value === '13295770001791' ||\n                            //IGE\n                            library.value === '13297690001791' ||\n                            //CMM\n                            library.value === '13297000001791' ||\n                            //BWO\n                            library.value === '13296770001791' ||\n                            //swisstopo\n                            library.value === '13297960001791' ||\n                            //SWR\n                            library.value === '13294350001791' ||\n                            //DEZA\n                            library.value === '2237435119010001791' ||\n                            //Oskar\n                            library.value === '13294120001791' ||\n                            //ZHAW\n                            library.value === '13298650001791' ||\n                            //UNINE---------------------------\n                            //Empty library\n                            library.value === '112045850005517' ||\n                            //PHZH----------------------------\n                            //PHZH, Bibliothek\n                            library.value === '112047180005521' ||\n                            //PHZH, Pestalozzianum\n                            library.value === '112046950005521' ||\n                            //OSTGR---------------------------\n                            //FHO CDI Library\n                            library.value === '693177870005515' ||\n                            //UNIGE---------------------------\n                            //Observatoire\n                            library.value === '112048390005502' ||\n                            //RZH-----------------------------\n                            //MUG\n                            library.value === '112059990005526' ||\n                            //RZS-----------------------------\n                            //Hochdorf (PMZ-Kurier Dienstag)\n                            library.value === '1007807780005505' ||\n                            //Luzern ZHB Speicherbibliothek\n                            library.value === '112054640005505' ||\n                            //Mediothek XUND\n                            library.value === '112051600005505' ||\n                            //PH Schwyz, Standort Goldau\n                            library.value === '112050940005505' ||\n                            //PH Schwyz, Standort Pfaeffikon\n                            library.value === '112051270005505' ||\n                            //PH Zug\n                            library.value === '112050610005505' ||\n                            //PMZ Luzern\n                            library.value === '112049720005505' ||\n                            //Schuepfheim (PMZ-Kurier Dienstag)\n                            library.value === '1007808000005505' ||\n                            //Sursee (PMZ-Kurier Dienstag)\n                            library.value === '1007808220005505' ||\n                            //Willisau (PMZ-Kurier Dienstag)\n                            library.value === '1007808440005505' ||\n                            //UZH / UZB------------------------\n                            //Speicherbibliothek, ZB-Bestand\n                            library.value === '112070490005508' ||\n                            //Speicherbibliothek, UZH-Bestand\n                            library.value === '112055100005508' ||\n                            //ZB, Musikabteilung\n                            library.value === '112071870005508' ||\n                            //UB Zuerich, Forschungsbibliothek Jakob Jud\n                            library.value === '112050270005508' ||\n                            //UB Zuerich, Graezistik, Latinistik und  Aegyptologie I\n                            library.value === '112051190005508' ||\n                            //UB Zuerich, Graezistik, Latinistik und  Aegyptologie\n                            library.value === '112049810005508' ||\n                            //UB Zuerich, Kinderspital\n                            library.value === '112056250005508' ||\n                            //UB Zuerich, Klassische Archaeologie\n                            library.value === '112047790005508' ||\n                            //UB Zuerich, Kommunikationswissenschaft\n                            library.value === '112053490005508' ||\n                            //UB Zuerich, Osteuropaeische Geschichte\n                            library.value === '112069340005508' ||\n                            //UB Zuerich, Phonetisches Labor\n                            library.value === '112050730005508' ||\n                            //UB Zuerich, Politikwissenschaft\n                            library.value === '112048660005508' ||\n                            //UB Zuerich, Praehistorische Archaeologie\n                            library.value === '112052570005508' ||\n                            //UB Zuerich, Rechtswissenschaften\n                            library.value === '112071640005508' ||\n                            //UB Zuerich, Wirtschafts- und Sozialgeschichte\n                            library.value === '112050960005508' ||\n                            //UB Zuerich,  UniversitaetsSpital\n                            library.value === '112051420005508' ||\n                            //UZH und ETH Zuerich, Selbstlernzentrum Sprachenzentrum\n                            library.value === '112054870005508' ||\n                            //UZH und ETH Zuerich, Sprachenzentrum\n                            library.value === '112046410005508' ||\n                            //ETH Math\n                            library.value === '112048250005503' ||\n                            //UZH, Anthropologisches Institut und Museum\n                            library.value === '112049580005508' ||\n                            //UZH, Bibliothek fuer Biomedizinische Ethik\n                            library.value === '112056020005508' ||\n                            //UZH, Palaeontologisches Institut und Museum\n                            library.value === '112055790005508' ||\n                            //UZH, Psychiatrische Universitaetsklinik\n                            library.value === '112046870005508' ||\n                            //ZB, Alte Drucke\n                            library.value === '112069800005508' ||\n                            //ZB, Graphische Sammlung\n                            library.value === '112070030005508' ||\n                            //ZB, Musikwissenschaftliches Institut der UZH\n                            library.value === '112057630005508' ||\n                            //ZB, Handschriften\n                            library.value === '112070260005508' ||\n                            //ZB, Karten\n                            library.value === '112070950005508' ||\n                            //ZB, VAR\n                            library.value === '112070720005508' ||\n                            //HPH \n                            //PHSG  Studienbereichsbibliotheken Mariaberg\n                            library.value === '112062440005520' ||\n                            //Empty Library\n                            library.value === '112069930005520' ||\n                            //PHSG Online Dokumente\n                            library.value === '112063820005520' ||\n                            //PHSG  Infomedis Web App\n                            library.value === '734691490005520' ||\n                            //SFUVET - Infomedis Web App\n                            library.value === '1333405650005520' ||\n                            //Zollikofen EHB Online\n                            library.value === '112056780005520' ||\n                            //Empty Library\n                            library.value === '112046060005514' ||\n                            //HES CDI Library\n                            library.value === '332743630005514' ||\n                            //-------------------------------------------------\n                            //Tribunal fédéral Lausanne\n                            library.value === '112048620005532' ||\n                            //Tribunal fédéral Lucerne\n                            library.value === '112049000005532' ||\n                            //Institut suisse de droit comparé\n                            library.value === '112047860005532' ||\n                            //Bibliothek des Bundesamtes für Justiz\n                            library.value === '112048240005532' ||\n                            //Empty Library\n                            library.value === '112047160005532' ||\n                            //TRI CDI Library\n                            library.value === '534313700005532' ||\n                            //Schweizerisches Nationalmuseum\n                            library.value === '112049420005526' ||\n                            //-------------------------------------------------\n                            //RZH CDI Library\n                            library.value === '744134310005526' ||\n                            //SIK-ISEA – Schweizerisches Institut für Kunstwissenschaft\n                            library.value === '112049040005526' ||\n                            //Jesuitenbibliothek Zürich\n                            library.value === '112046860005526'\n\n                        ) {\n                            console.log('hidden Library', library);\n                            library.value = 'undefined';\n                        }\n                    })\n            })\n        } catch (e) {\n            console.error(\"***SLSP*** an error occured: Rapido hide Library\\n\\n\");\n            console.error(e.message);\n        }\n    }\n}\n\nslspRapidoHideLibraryController.$inject = ['$scope'];","import { slspRapidoHideLibraryController } from './slsp-rapido-hide-library.controller';\n\n\nexport const slspRapidoHideLibraryModule = angular\n    .module('slspRapidoHideLibraryModule', [])\n    .controller('slspRapidoHideLibraryController', slspRapidoHideLibraryController)\n    .component('slspRapidoHideLibraryComponent', {\n        bindings: { afterCtrl: '<' },\n        controller: 'slspRapidoHideLibraryController',\n\n    })","\nimport {slspCollapseOtherInstModule} from './slsp-collapse-other-inst/slsp-collapse-other-inst.module';\nimport {slspIconLabelOtherMembersModule} from './slsp-icon-label-other-members/slsp-icon-label-other-members.module';\n\nexport const prmAlmaOtherMembersAfterModule = angular\n    .module('prmAlmaOtherMembersAfterModule', [])\n        .component('prmAlmaOtherMembersAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<slsp-collapse-other-inst-component after-ctrl=\"$ctrl\"></slsp-collapse-other-inst-component><slsp-icon-label-other-members-component after-ctrl=\"$ctrl\"></slsp-icon-label-other-members-component><slsp-alma-other-members-after parent-ctrl=\"$parent.$ctrl\"></slsp-alma-other-members-after>`\n        });\n\nprmAlmaOtherMembersAfterModule.requires.push(slspCollapseOtherInstModule.name);\nprmAlmaOtherMembersAfterModule.requires.push(slspIconLabelOtherMembersModule.name);","\n\n//--------CollapseOtherInst ---------------------------------------\n\n\nexport class slspCollapseOtherInstController {\n\n    constructor( $scope, $compile) {\n        this.$scope = $scope;\n        this.$compile = $compile;\n    }\n\n    $onInit() {\n        try {\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n\n            if (this.parentCtrl.serviceMode !== 'howovp') {\n           \n                this.parentCtrl.isCollapsed = true;\n            }\n            else {\n                this.parentCtrl.isCollapsed = false;\n\n                if (this.parentCtrl.availabilityType == 'P') {\n                        this.noItemAtPickupLocation = noItemAtPickupLocation ;\n                        let noItemAtPickupLocation = document.querySelectorAll(`prm-alma-other-members[ng-if=\"$ctrl.ifShowOther('P')\"]`);\n                        let htmlnoItemAtPickupLocation = `<div class=\"bar alert-bar zero-margin-bottom layout-align-center-center layout-row\"><span class=\"center\" translate=\"customized.alert.nolocations\">​</span></div>`;\n                            \n                            angular.element(noItemAtPickupLocation).prepend(this.$compile(htmlnoItemAtPickupLocation)(this.$scope)).addClass('noItemAtPickupLocation');\n                }\n            }\n        }\n            \n            \n       \n        catch (e) {\n            console.error(\"***SLSP*** an error occured: slspCollapseOtherInstController\\n\\n\");\n            console.error(e.message);\n        }\n    }\n }\n\n\nslspCollapseOtherInstController.$inject =  ['$scope', '$compile'];\n\n","\n    import {slspCollapseOtherInstController} from './slsp-collapse-other-inst.controller';\n    import {slspCollapseOtherInstHtml} from './slsp-collapse-other-inst.html';\n\n    export const slspCollapseOtherInstModule = angular\n        .module('slspCollapseOtherInstModule', [])\n            .controller('slspCollapseOtherInstController', slspCollapseOtherInstController)\n            .component('slspCollapseOtherInstComponent', {\n                bindings: {afterCtrl: '<'},\n                controller: 'slspCollapseOtherInstController',\n                template: slspCollapseOtherInstHtml\n            })","\n\n//--------slspIconLabel ---------------------------------------\n\n\nexport class slspIconLabelOtherMembersController {\n\n    constructor( $scope, $compile, $timeout ) {\n        this.$scope = $scope;\n        this.$compile = $compile;\n        this.$timeout = $timeout;\n    }\n\n    \n\n    $onInit() {\n        try{\n            this.$timeout(() => {\n                this.parentCtrl = this.afterCtrl.parentCtrl;\n                \n                if (this.parentCtrl.availabilityType == \"E\") {\n                    \n                        this.iconLabelOtherMembersE = iconLabelOtherMembersE ;\n                        let iconLabelOtherMembersE = document.querySelectorAll(`prm-alma-other-members[ng-if=\"$ctrl.ifShowOther('E')\"] md-tab-content._md.md-active.md-no-scroll div md-content._md.md-primoExplore-theme md-list.md-primoExplore-theme`);\n                        let htmlOtherMembersE = `<div class=\"icnWrp\"><div class=\"iconDiv\"><svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Ebene_2\" width=\"100%\" height=\"100%\" viewBox=\"0 0 185 185\"><g id=\"System_icons\"><g><rect width=\"185\" height=\"185\" fill=\"none\" opacity=\".2\"/><g id=\"Outline_Icons\"><g><path d=\"M155.98,92.26c0,35.19-28.5,63.72-63.66,63.72-35.16,0-63.3-29.68-63.3-64.87S55.9,30.44,89.77,29.08c.92-.04,1.83-.06,2.76-.06,35.16,0,63.45,28.05,63.45,63.24Z\" fill=\"none\" stroke=\"#000\" stroke-linejoin=\"round\" stroke-width=\"6\"/><path d=\"M89.77,29.08c-33.12,35.88-33.12,82.69,0,126.85\" fill=\"none\" stroke=\"#000\" stroke-linejoin=\"round\" stroke-width=\"6\"/><path d=\"M95.29,29.08c33.12,35.88,33.12,82.67,0,126.83\" fill=\"none\" stroke=\"#000\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"39.43\" y1=\"56.62\" x2=\"145.06\" y2=\"56.62\" fill=\"none\" stroke=\"#000\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"29.04\" y1=\"89.74\" x2=\"155.98\" y2=\"89.74\" fill=\"none\" stroke=\"#000\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"37.22\" y1=\"122.86\" x2=\"148.17\" y2=\"122.86\" fill=\"none\" stroke=\"#000\" stroke-linejoin=\"round\" stroke-width=\"6\"/></g></g></g></g></svg></div><div class=\"iconLabel\" translate=\"customized.fee.online\"></div></div>`;\n                            \n                            angular.element(iconLabelOtherMembersE).prepend(this.$compile(htmlOtherMembersE)(this.$scope)).addClass('icnLblOtherMembersE');\n                }\n\n                if (this.parentCtrl.availabilityType == \"P\") {\n                    \n                                        \n                    this.iconLabelOtherMembersP2 = iconLabelOtherMembersP2 ;\n                    let iconLabelOtherMembersP2 = document.querySelectorAll(`prm-alma-other-members[ng-if=\"$ctrl.ifShowOther('P')\"] md-tab-content._md.md-active.md-no-scroll div md-content._md.md-primoExplore-theme md-list.md-primoExplore-theme`);\n                    let htmlOtherMembersP2 = `<div class=\"icnWrp\"><div class=\"iconDiv\"><svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Ebene_4\" width=\"100%\" height=\"100%\" viewBox=\"0 0 185 185\"><g id=\"System_icons\"><g><rect width=\"185\" height=\"185\" fill=\"none\" opacity=\".2\"/><g><rect x=\"32.65\" y=\"139.75\" width=\"119.7\" height=\"12.6\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><rect x=\"38.95\" y=\"70.45\" width=\"107.1\" height=\"69.3\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"164.95\" y1=\"152.35\" x2=\"20.05\" y2=\"152.35\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"51.55\" y1=\"70.45\" x2=\"51.55\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"83.05\" y1=\"70.45\" x2=\"83.05\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"70.45\" y1=\"70.45\" x2=\"70.45\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"101.95\" y1=\"70.45\" x2=\"101.95\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"114.55\" y1=\"70.45\" x2=\"114.55\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"133.45\" y1=\"70.45\" x2=\"133.45\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><polygon points=\"158.65 70.45 26.35 70.45 92.5 32.65 158.65 70.45\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/></g></g></g></svg></div><div class=\"iconLabel\" translate=\"customized.fee.physical\"></div></div>`;\n                        \n                        angular.element(iconLabelOtherMembersP2).prepend(this.$compile(htmlOtherMembersP2)(this.$scope)).addClass('icnLblOtherMembersP2');\n                }\n\n\n          \n                \n            },0);   \n        }\n        \n        catch(e){\n            console.error(\"***SLSP*** an error occured: Rapido \\n\\n\");\n            console.error(e.message);\n        }\n    }\n    \n}\n\nslspIconLabelOtherMembersController.$inject =  [ '$scope', '$compile', '$timeout'];\n\n","\n    import {slspIconLabelOtherMembersController} from './slsp-icon-label-other-members.controller';\n    import {slspIconLabelOtherMembersHtml} from './slsp-icon-label-other-members.html';\n\n    export const slspIconLabelOtherMembersModule = angular\n        .module('slspIconLabelOtherMembersModule', [])\n            .controller('slspIconLabelOtherMembersController', slspIconLabelOtherMembersController)\n            .component('slspIconLabelOtherMembersComponent', {\n                bindings: {afterCtrl: '<'},\n                controller: 'slspIconLabelOtherMembersController',\n                template: slspIconLabelOtherMembersHtml\n            })","\n\nimport {slspIconLabelViewitItemsModule} from './slsp-icon-label-viewit-items/slsp-icon-label-viewit-items.module';\n\nexport const prmAlmaViewitItemsAfterModule = angular\n    .module('prmAlmaViewitItemsAfterModule', [])\n        .component('prmAlmaViewitItemsAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<slsp-icon-label-viewit-items-component after-ctrl=\"$ctrl\"></slsp-icon-label-viewit-items-component>\n                       <slsp-alma-viewit-items-after parent-ctrl=\"$parent.$ctrl\"></slsp-alma-viewit-items-after>`\n        });\n\n\nprmAlmaViewitItemsAfterModule.requires.push(slspIconLabelViewitItemsModule.name);","\n\n//--------slspIconLabel ---------------------------------------\n\n\nexport class slspIconLabelViewitItemsController {\n\n    constructor( $scope, $compile, $timeout ) {\n        this.$scope = $scope;\n        this.$compile = $compile;\n        this.$timeout = $timeout;\n    }\n\n    \n\n    $onInit() {\n        try{\n            this.$timeout(() => {\n                this.parentCtrl = this.afterCtrl.parentCtrl;\n                \n                if (this.parentCtrl.serviceType == \"ELECTRONIC\") {\n                    \n                        this.iconLabelViewitItems = iconLabelViewitItems ;\n                        let iconLabelViewitItems = document.querySelectorAll(\"#getit_link1_0 > div > prm-full-view-service-container > div.section-body > div > prm-alma-viewit > prm-alma-viewit-items:nth-child(1) > md-list\");\n                        let htmlViewitItems = `<div class=\"icnWrp\"><div class=\"iconDiv\"><svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Ebene_2\" width=\"100%\" height=\"100%\" viewBox=\"0 0 185 185\"><g id=\"System_icons\"><g><rect width=\"185\" height=\"185\" fill=\"none\" opacity=\".2\"/><g id=\"Outline_Icons\"><g><path d=\"M155.98,92.26c0,35.19-28.5,63.72-63.66,63.72-35.16,0-63.3-29.68-63.3-64.87S55.9,30.44,89.77,29.08c.92-.04,1.83-.06,2.76-.06,35.16,0,63.45,28.05,63.45,63.24Z\" fill=\"none\" stroke=\"#000\" stroke-linejoin=\"round\" stroke-width=\"6\"/><path d=\"M89.77,29.08c-33.12,35.88-33.12,82.69,0,126.85\" fill=\"none\" stroke=\"#000\" stroke-linejoin=\"round\" stroke-width=\"6\"/><path d=\"M95.29,29.08c33.12,35.88,33.12,82.67,0,126.83\" fill=\"none\" stroke=\"#000\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"39.43\" y1=\"56.62\" x2=\"145.06\" y2=\"56.62\" fill=\"none\" stroke=\"#000\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"29.04\" y1=\"89.74\" x2=\"155.98\" y2=\"89.74\" fill=\"none\" stroke=\"#000\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"37.22\" y1=\"122.86\" x2=\"148.17\" y2=\"122.86\" fill=\"none\" stroke=\"#000\" stroke-linejoin=\"round\" stroke-width=\"6\"/></g></g></g></g></svg></div><div class=\"iconLabel\" translate=\"customized.fee.online\"></div></div>`;\n                        let iconLabelRidOff = document.querySelectorAll(\".icnWrp:nth-child(2)\")    \n                            angular.element(iconLabelRidOff).detach();                                                           \n                            angular.element(iconLabelViewitItems).prepend(this.$compile(htmlViewitItems)(this.$scope)).addClass('icnLblViewitItems');\n                }\n                else {\n                    return\n            }\n                         \n                \n            },0);   \n        }\n        \n        catch(e){\n            console.error(\"***SLSP*** an error occured: Rapido \\n\\n\");\n            console.error(e.message);\n        }\n    }\n    \n}\n\nslspIconLabelViewitItemsController.$inject =  [ '$scope', '$compile', '$timeout'];\n\n","\n    import {slspIconLabelViewitItemsController} from './slsp-icon-label-viewit-items.controller';\n    import {slspIconLabelViewitItemsHtml} from './slsp-icon-label-viewit-items.html';\n\n    export const slspIconLabelViewitItemsModule = angular\n        .module('slspIconLabelViewitItemsModule', [])\n            .controller('slspIconLabelViewitItemsController', slspIconLabelViewitItemsController)\n            .component('slspIconLabelViewitItemsComponent', {\n                bindings: {afterCtrl: '<'},\n                controller: 'slspIconLabelViewitItemsController',\n                template: slspIconLabelViewitItemsHtml\n            })","\nimport {slspIconLabelModule} from './slsp-icon-label/slsp-icon-label.module';\n\nexport const prmFullViewAfterModule = angular\n    .module('prmFullViewAfterModule', [])\n        .component('prmFullViewAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<slsp-icon-label-component after-ctrl=\"$ctrl\"></slsp-icon-label-component><slsp-full-view-after parent-ctrl=\"$parent.$ctrl\"></slsp-full-view-after>`\n        });\n\n        prmFullViewAfterModule.requires.push(slspIconLabelModule.name);\n","\n\n//--------slspIconLabel ---------------------------------------\n\n\nexport class slspIconLabelController {\n\n    constructor( $scope, $compile, $timeout ) {\n        this.$scope = $scope;\n        this.$compile = $compile;\n        this.$timeout = $timeout;\n    }\n\n    \n\n    $onInit() {\n        try{\n            this.$timeout(() => {\n                this.parentCtrl = this.afterCtrl.parentCtrl;\n                \n\n                    \n                        // this.iconLabel3 = iconLabel3 ;\n                        // let iconLabel3 = document.querySelectorAll('#getit_link1_0 > div > prm-full-view-service-container > div.section-body > div > prm-alma-viewit > prm-alma-viewit-items > md-list');\n                        // let html3 = `<div class=\"icnWrp\"><div class=\"iconDiv\"><svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Ebene_2\" width=\"100%\" height=\"100%\" viewBox=\"0 0 185 185\"><g id=\"System_icons\"><g><rect width=\"185\" height=\"185\" fill=\"none\" opacity=\".2\"/><g id=\"Outline_Icons\"><g><path d=\"M155.98,92.26c0,35.19-28.5,63.72-63.66,63.72-35.16,0-63.3-29.68-63.3-64.87S55.9,30.44,89.77,29.08c.92-.04,1.83-.06,2.76-.06,35.16,0,63.45,28.05,63.45,63.24Z\" fill=\"none\" stroke=\"#000\" stroke-linejoin=\"round\" stroke-width=\"6\"/><path d=\"M89.77,29.08c-33.12,35.88-33.12,82.69,0,126.85\" fill=\"none\" stroke=\"#000\" stroke-linejoin=\"round\" stroke-width=\"6\"/><path d=\"M95.29,29.08c33.12,35.88,33.12,82.67,0,126.83\" fill=\"none\" stroke=\"#000\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"39.43\" y1=\"56.62\" x2=\"145.06\" y2=\"56.62\" fill=\"none\" stroke=\"#000\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"29.04\" y1=\"89.74\" x2=\"155.98\" y2=\"89.74\" fill=\"none\" stroke=\"#000\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"37.22\" y1=\"122.86\" x2=\"148.17\" y2=\"122.86\" fill=\"none\" stroke=\"#000\" stroke-linejoin=\"round\" stroke-width=\"6\"/></g></g></g></g></svg></div><div class=\"iconLabel\">online</div></div>`;\n                            \n                        //     angular.element(iconLabel3).prepend(this.$compile(html3)(this.$scope)).addClass('icnLbl3');\n\n\n                        //     this.iconLabel4 = iconLabel4 ;\n                        //     let iconLabel4 = document.querySelectorAll('md-content > prm-location-items > md-list');\n                                                                        \n                        //     let html4 = `<div class=\"icnWrp><div class=\"iconDiv4\"></div><div class=\"iconLabel\">pickup</div></div>`;\n                            \n                        //         angular.element(iconLabel4).prepend(this.$compile(html4)(this.$scope)).addClass('icnLbl3');\n\n                                // this.iconLabel5 = iconLabel5 ;\n                                // let iconLabel5 = document.querySelectorAll('md-content > prm-locations > div.padding-left-medium > md-list:nth-child(1)');\n                                                                            \n                                // let html5 = `<div class=\"icnWrp\"><div class=\"iconDiv5\"></div><div class=\"iconLabel\">pickup2</div></div>`;\n                                \n                                //     angular.element(iconLabel5).prepend(this.$compile(html5)(this.$scope)).addClass('icnLbl3');\n                           \n                \n            }, 3000);   \n        }\n        \n        catch(e){\n            console.error(\"***SLSP*** an error occured: Rapido \\n\\n\");\n            console.error(e.message);\n        }\n    }\n    \n}\n\nslspIconLabelController.$inject =  [ '$scope', '$compile', '$timeout'];\n\n","\n    import {slspIconLabelController} from './slsp-icon-label.controller';\n    import {slspIconLabelHtml} from './slsp-icon-label.html';\n\n    export const slspIconLabelModule = angular\n        .module('slspIconLabelModule', [])\n            .controller('slspIconLabelController', slspIconLabelController)\n            .component('slspIconLabelComponent', {\n                bindings: {afterCtrl: '<'},\n                controller: 'slspIconLabelController',\n                template: slspIconLabelHtml\n            })","\nimport {slspRenewItemTextModule} from './slsp-renew-item-text/slsp-renew-item-text.module';\n\nexport const slspLoanAfterModule = angular\n    .module('slspLoanAfterModule', [])\n        .component('prmLoanAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<slsp-renew-item-text-component after-ctrl=\"$ctrl\"></slsp-renew-item-text-component><slsp-loan-after parent-ctrl=\"$parent.$ctrl\"></slsp-loan-after>`\n        });\n\nslspLoanAfterModule.requires.push(slspRenewItemTextModule.name);\n","//--------Renewstatus display of loan items ---------------------------------------\n\nexport class slspRenewItemTextController {\n\n    constructor() {\n\n    }\n\n    $onInit() {\n        try {\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n            this.getRenewText = getRenewText;\n\n            function getRenewText() {\n                if (this.parentCtrl.item.renewstatuses !== undefined && this.parentCtrl.item.renewstatuses.renewstatus[0] !== undefined) {\n                    return this.parentCtrl.item.renewstatuses.renewstatus[0];\n                }\n                else {\n                    return\n                }\n            }\n        }\n\n        catch (e) {\n            console.error(\"***SLSP*** an error occured: slspRenewItemTextController\\n\\n\");\n            console.error(e.message);\n        }\n    }\n}\n\nslspRenewItemTextController.$inject = [];\n\n","\n\n\n\n\n    import {slspRenewItemTextController} from './slsp-renew-item-text.controller';\n    import {slspRenewItemTextHtml} from './slsp-renew-item-text.html';\n\n    export const slspRenewItemTextModule = angular\n        .module('slspRenewItemTextModule', [])\n            .controller('slspRenewItemTextController', slspRenewItemTextController)\n            .component('slspRenewItemTextComponent', {\n                bindings: {afterCtrl: '<'},\n                controller: 'slspRenewItemTextController',\n                template: slspRenewItemTextHtml\n            })","import { ethMapongoCheckModule } from './eth-mapongo/eth-mapongo-check.module';\nimport { ethMapongoModule } from './eth-mapongo/eth-mapongo.module';\nimport { slspIButtonModule } from './slsp-i-button/slsp-i-button.module';\nimport {slspIconLabelLocationItemsModule} from './slsp-icon-label-location-items/slsp-icon-label-location-items.module';\n\n\nexport const ethLocationItemsAfterModule = angular\n    .module('ethLocationItemsAfterModule', [])\n    .component('prmLocationItemsAfter', {\n        bindings: { parentCtrl: '<' },\n        template: \n\t\t`\n\t\t<eth-mapongo-check after-ctrl=\"$ctrl\"></eth-mapongo-check>\n        <slsp-i-button-component after-ctrl=\"$ctrl\"></slsp-i-button-component>\n        <slsp-icon-label-location-items-component after-ctrl=\"$ctrl\"></slsp-icon-label-location-items-component>\n        <slsp-location-items-after parent-ctrl=\"$parent.$ctrl\"></slsp-location-items-after>\n        \n\t\t`\n    });\n\nethLocationItemsAfterModule.requires.push(ethMapongoCheckModule.name);\nethLocationItemsAfterModule.requires.push(ethMapongoModule.name);\nethLocationItemsAfterModule.requires.push(slspIButtonModule.name);\nethLocationItemsAfterModule.requires.push(slspIconLabelLocationItemsModule.name);\n\n\n","/**\n* @ngdoc service\n* @key ethConfigService\n*\n* @description\n*\n* Service to get and handle informations from a module config:\n* - getLabel()\n* - getUrl()\n* - getLanguage()\n*\n */\nexport const ethConfigService = ['$rootScope', function( $rootScope ){\n\n    function getLanguage(){\n        try{\n            let sms = $rootScope.$$childHead.$ctrl.userSessionManagerService;\n            if (!sms) {\n                console.error(\"***ETH*** ethConfigService: userSessionManagerService not available\");\n                return 'en';\n            }\n            else{\n                return sms.getUserLanguage() || $window.appConfig['primo-view']['attributes-map'].interfaceLanguage;\n            }\n        }\n        catch(e){\n            console.error(\"***ETH*** an error occured: ethConfigService.getLanguage():\");\n            console.error(e.message);\n            return 'en';\n        }\n    }\n\n\n    function getLabel(config, key) {\n        try{\n            let lang = this.getLanguage();\n            if (!config.label[key]) {\n                console.error(\"***ETH*** ethConfigService.getLabel: '\" + key + \"' not in config\");\n                return key;\n            }\n            if(config.label[key][lang]){\n                return config.label[key][lang];\n            }\n            else{\n                return config.label[key]['en'];\n            }\n        }\n        catch(e){\n            console.error(\"***ETH*** an error occured: ethConfigService.getLabel():\");\n            console.error(e.message);\n            return '';\n        }\n    }\n\n    function getUrl(config, key) {\n        try{\n            let lang = this.getLanguage();\n            if (!config.url[key]) {\n                console.error(\"***ETH*** ethConfigService.getUrl: '\" + key + \"' not in config\");\n                return '';\n            }\n            if(config.url[key][lang]){\n                return config.url[key][lang];\n            }\n            else{\n                return config.url[key]['en'];\n            }\n        }\n        catch(e){\n            console.error(\"***ETH*** an error occured: ethConfigService.getUrl():\");\n            console.error(e.message);\n            return '';\n        }\n    }\n\n    return {\n        getLanguage: getLanguage,\n        getLabel: getLabel,\n        getUrl: getUrl\n    };\n}]\n","export class ethMapongoCheckController {\n\n    constructor( $scope, $compile, $element, ethMapongoLibrariesService ) {\n        this.$scope = $scope;\n        this.$compile = $compile;\n        this.$element = $element;\n        this.ethMapongoLibrariesService = ethMapongoLibrariesService;\n        this.isMapongoLibrary = true;\n        this.noLocationItemAfter = 0;\n     }\n\n    $onInit() {\n        this.parentCtrl = this.afterCtrl.parentCtrl;\n    }\n\n    $doCheck() {\n        try{\n            // are location item elements loaded and rendered? Or \"show more items\" pushed?\n            let locationItemAfter = this.$element[0].parentElement.parentElement.getElementsByTagName('prm-location-item-after');\n            let noLocationItemAfter = locationItemAfter.length;\n            if(noLocationItemAfter <= this.noLocationItemAfter){\n                return;\n            }\n            this.noLocationItemAfter = noLocationItemAfter;\n\n            // mapongo library?\n            if(!this.isMapongoLibrary)return;\n            if (!this.ethMapongoLibrariesService.isMapongoLibrary(this.parentCtrl.loc.location.libraryCode)) {\n                this.isMapongoLibrary = false;\n                return;\n            }\n\n            // array of html collection prm-location-item-after\n            let aPrmLocationItemAfter = [].slice.call(locationItemAfter);\n            this.recordid = this.parentCtrl.item.pnx.control.sourcerecordid[0];\n\n            // iterate items of a location (Exemplare), get reference to after directive of location-item and inject eth-mapongo-directive\n            for(let i = 0; i < this.parentCtrl.loc.items.length; i++){\n                if(i >= aPrmLocationItemAfter.length){\n                    // more items than initially rendered\n                    return;\n                }\n\n                let item = this.parentCtrl.loc.items[i];\n                let prmLocationItemAfter = aPrmLocationItemAfter[i];\n\n                // is mapongo directive already injected?\n                let ethMapongo = prmLocationItemAfter.querySelector('eth-mapongo');\n                if(!!ethMapongo){\n                    continue;\n                }\n\n                if (!this.ethMapongoLibrariesService.isMapongoSubLocation(this.parentCtrl.loc.location.libraryCode, item._additionalData.secondarylocationname)) {\n                    continue;\n                }\n\t\t\t\t\n                if(!this.ethMapongoLibrariesService.isAvailable(item._additionalData.itemstatusname)){\n                    continue;\n                }\n\t\t\t\t\n\n                this.subLocationCode = this.ethMapongoLibrariesService.getSubLocationCode(this.parentCtrl.loc.location.libraryCode, item._additionalData.secondarylocationname);\n                this.callnumber = item._additionalData.callnumber;\n                let addCallnumberEntry = item.fullItemFields.filter(function(e) {return e.indexOf(\"Zusätzliche Signatur:\") > -1 || e.indexOf(\"Additional call number:\") > -1;} );\n                this.addCallnumber = \"\";\n                if (addCallnumberEntry.length > 0) {\n                    this.addCallnumber = addCallnumberEntry[0].replace(\"Zusätzliche Signatur: \",\"\").replace(\"Additional call number: \",\"\");\n                }\n                if(this.addCallnumber != \"\"){\n                    // todo: is it always correct to use 'Additional call number' if it exists?\n                    this.callnumber = this.addCallnumber;\n                }\n\n                let barcodeEntry = item.fullItemFields.filter(function(e) {return e.indexOf(\"Barcode:\") > -1 || e.indexOf(\"Strichcode:\") > -1;} );\n                this.barcode = \"\";\n                if (barcodeEntry.length > 0) {\n                    this.barcode = barcodeEntry[0].replace(\"Barcode: \",\"\").replace(\"Strichcode: \",\"\");\n                }\n\t\t\t\t\n                // inject eth-mapongo element (handled by eth-mapongo.module)\n                angular.element(prmLocationItemAfter).append(this.$compile('<eth-mapongo after-ctrl=\"$ctrl\" class=\"eth-mapongo-container\" recordid=\"' + this.recordid + '\" barcode=\"' + this.barcode + '\" callnumber=\"' + this.callnumber + '\" sublocation=\"' + this.subLocationCode + '\"parent-ctrl=\"$ctrl.parentCtrl\"></eth-mapongo>')(this.$scope));\n            }\n        }\n        catch(e){\n            console.error(\"***ETH*** ethMapongoCheckController.$doCheck:\");\n            console.error(e.message);\n        }\n\n    }\n}\n\nethMapongoCheckController.$inject = [ '$scope', '$compile', '$element', 'ethMapongoLibrariesService'];\n","/**\n* @ngdoc module\n* @name ethMapongoCheckModule\n*\n* @description\n* checks if mapongo should be injected\n* - checks if the current library and location (Standort) are registered for Mapongo\n* - checks the item status\n* - may inject an eth-mapongo directive and specific attributes for it in prm-location-item-after (handled by eth-mapongo.module.js)\n*\n* A prm controller works only for prmLocationItems. There is no prmLocationItem controller\n* $ctrl in prmLocationItemAfter is a reference to prmLocationItems Controller\n*\n* If there is 1 location: prmLocationItemsAfter\n*\n* If there are multiple locations: prmLocationAfter;\n* after all locations: prmLocationsAfter;\n* after choosing a location: prmLocationItemsAfter\n*\n*\n* <b>AngularJS Dependencies</b><br>\n* Service {@link ETH.ethMapongoLibrariesService}<br>\n*\n*\n* <b>CSS/Image Dependencies</b><br>\n*\n*\n* @example\n* ZHAW MMS IDs: 991128155109705501, 990013732410205503; 2 Exemplare: 990058665580205503; 5 Exemplare: 991129451879705501\n*\n*/\nimport {ethMapongoLibrariesService} from './eth-mapongo-libraries.service';\nimport {ethMapongoCheckController} from './eth-mapongo-check.controller';\n\nexport const ethMapongoCheckModule = angular\n    .module('ethMapongoCheckModule', [])\n        .factory('ethMapongoLibrariesService', ethMapongoLibrariesService)\n        .controller('ethMapongoCheckController', ethMapongoCheckController)\n        .component('ethMapongoCheck', {\n            bindings: {afterCtrl: '<'},\n            controller: 'ethMapongoCheckController'\n        })\n","/**\n* @ngdoc service\n* @name ethMapongoLibrariesService\n*\n* @description\n*\n* Holds informations about the libraries which use mapongo\n*\n*\n* <b>Used by</b><br>\n*\n* Module {@link ETH.ethMapongoModule}<br>\n*\n*\n */\nexport const ethMapongoLibrariesService = [function(){\n    // todo: are the locations correct and complete?\n    const libraries = [\n            {\n                    \"shortname\": \"ZHdK-MIZ\",\n                    \"name\": \"ZHdK-MIZ\",\n                    \"libraryCode\": \"E65\",\n                    \"baseUrl\": \"https://zhdk.mapongo.de\",\n                    \"locationCodeWhiteList\": [\"E65G1\",\"E65G2\",\"E65E1\",\"E65U1\",\"E65U4\"],\n                    \"locationWhiteList\": [\"Galeriegeschoss\",\"Galeriegeschoss\",\"Eingangsgeschoss\",\"Untergeschoss\",\"Untergeschoss Curating Degree Zero Archive\"]\n            },\n            {\n                    \"shortname\": \"ZHAW-HSB-ZH\",\n                    \"name\": \"ZHAW Hochschulbibliothek Zürich\",\n                    \"libraryCode\": \"E97\",\n                    \"baseUrl\": \"https://zhdk.mapongo.de\",\n                    \"locationCodeWhiteList\": [\"E97E1\"],\n                    \"locationWhiteList\": [\"Eingangsgeschoss\"]\n            },\n            {\n                    \"shortname\": \"ZHAW-HSB-WIN\",\n                    \"name\": \"ZHAW Hochschulbibliothek Winterthur\",\n                    \"libraryCode\": \"E51\",\n                    \"baseUrl\": \"https://zhaw.mapongo.de\",\n                    \"locationCodeWhiteList\": [\"E51BA\",\"E51B0\",\"E51B9\",\"E51B2\",\"E51B8\",\"E51BN\",\"E51BL\",\"E51BG\",\"E51BT\",\"E51BB\",\"E51BW\",\"E51BA\",\"E51BK\",\"E51BR\"],\n                    \"locationWhiteList\": [\"Architektur und Bau - 1. ZG\",\"Neuerwerbungen - EG\",\"Handapparate - EG\",\"Compactus, offen - EG\",\"Zeitschriften - EG\",\"Allgemeines und Nachschlagewerke - EG\",\"Angewandte Linguistik - EG\",\"Gesundheit und Medizin - EG\",\"Technik und Naturwissenschaften - 1. ZG\",\"Wissenschaft und Bildung - EG\",\"Wirtschaft und Management - 1. ZG\",\"Architektur und Bau - 1. ZG\",\"Kunst und Unterhaltung - EG\",\"Recht und Politik - 2. ZG\"]\n            },\n            {\n                    \"shortname\": \"PHZH\",\n                    \"name\": \"PH Zürich, Bibliothek\",\n                    \"libraryCode\": \"UPHZH\",\n                    \"baseUrl\": \"https://phzh.mapongo.de\",\n                    \"locationCodeWhiteList\": [\"ULFHF\",\"ULFHG\",\"ULFHN\",\"ULFHS\"],\n                    \"locationWhiteList\": [\"Stockwerk F - frei zugänglich\",\"Stockwerk G - frei zugänglich\", \"Stockwerk H Nord - frei zugänglich\",\"Stockwerk H Süd - frei zugänglich\"]\n            },\n            {\n                    \"shortname\": \"HGK-MED\",\n                    \"name\": \"FHNW HGK-Mediathek Basel\",\n                    \"libraryCode\": \"E75\",\n                    \"baseUrl\":\"https://mediathek.hgk.fhnw.ch/nebis\",\n                    \"locationCodeWhiteList\": [\"HAP\",\"E75BI\",\"E75AC\",\"E75MA\",\"E75VS\"],\n\t\t            \"locationWhiteList\":[\"Handapparat\",\"Mediathek\",\"Archiv\",\"Magazin\",\"Verschiedene Standorte\"]\n            },\n            {\n                    \"shortname\": \"HGK-MED\",\n                    \"name\": \"FHNW Campus Muttenz Bibliothek\",\n                    \"libraryCode\": \"E44\",\n                    \"baseUrl\":\"https://fhnw-cmu.mapongo.de\",\n                    \"locationCodeWhiteList\": [\"E44TE\",\"E44BI\",\"E44MG\",\"E44VS\"],\n                    \"locationWhiteList\":[\"Ausleihe auf Anfrage, bitte Bibliothek kontaktieren\",\"Bibliothek\",\"Magazin: Nicht frei zugänglich, zur Abholung bestellen\",\"Verschiedene Standorte\"]\n            }\n    ];\n\n    // todo: are the statuses correct and complete?\n    const availabilityStatus = ['Exemplar ist vorhanden', 'Item in place', 'Exemplaire en rayon', 'Copia in posizione'];\n\n    function getMapongoLibrary(libraryCode){\n      let filterLibraries = libraries.filter( l => {return l.libraryCode === libraryCode;} );\n      if (filterLibraries.length > 0)\n          return filterLibraries[0];\n      else\n          return null;\n    }\n\n    function isMapongoLibrary(libraryCode){\n      let filterLibraries = libraries.filter( l => {return l.libraryCode === libraryCode} );\n      if (filterLibraries.length > 0)return true;\n      else return false;\n    }\n\n    function isMapongoSubLocation(libraryCode, subLocation){\n      let filterLibraries = libraries.filter( l => {return l.libraryCode === libraryCode && l.locationWhiteList.indexOf(subLocation)>-1;} );\n      if (filterLibraries.length > 0)return true;\n      else return false;\n    }\n\n    function getSubLocationCode(libraryCode, subLocation){\n        let filterLibraries = libraries.filter( l => {return l.libraryCode === libraryCode} );\n        if (filterLibraries.length === 0)return null;\n        let i = filterLibraries[0].locationWhiteList.indexOf(subLocation);\n        return filterLibraries[0].locationCodeWhiteList[i];\n    }\n\n    function getBaseUrl(libraryCode){\n        let lib = getMapongoLibrary(libraryCode);\n        if (lib) {\n            return lib.baseUrl;\n        }\n        else{\n            return \"\";\n        }\n\n    }\n\n    function isAvailable(itemstatusname){\n        let filterStatus = availabilityStatus.filter( s => {return s === itemstatusname});\n        if (filterStatus.length > 0)return true;\n        return false;\n    }\n\n    return {\n        isMapongoLibrary: isMapongoLibrary,\n        isMapongoSubLocation: isMapongoSubLocation,\n        getBaseUrl: getBaseUrl,\n        getSubLocationCode: getSubLocationCode,\n        isAvailable: isAvailable\n    };\n\n\n}];\n","export const ethMapongoConfig = function(){\n    return {\n        label: {\n            qrc: {\n                de: 'Karte auf Smartphone laden',\n                en: 'Load map on your smartphone',\n                fr: 'Charger la carte sur votre smartphone'\n            }\n        }\n    }\n}\n","export class ethMapongoController {\n\n    constructor(ethMapongoLibrariesService, ethConfigService, ethMapongoConfig) {\n        this.ethMapongoLibrariesService = ethMapongoLibrariesService;\n        this.ethConfigService = ethConfigService;\n        this.config = ethMapongoConfig;\n        this.lang = this.ethConfigService.getLanguage();\n    }\n\n    $onInit() {\n        // reference to prmLocationItemsController (all items)\n        this.parentCtrl = this.afterCtrl.parentCtrl;\n    };\n\n    getMapongoImageSrc() {\n        let src = \"\";\n        try{\n            if (!this.parentCtrl.loc || !this.parentCtrl.loc.location) {\n                console.error(\"***ETH*** ethMapongoController.getMapongoImageSrc: loc or loc.location not available\");\n                return;\n            }\n            let loc = this.parentCtrl.loc.location;\n            let baseUrl = this.ethMapongoLibrariesService.getBaseUrl(loc.libraryCode);\n\n            src = baseUrl + \"/static_images/projects/1/search_thumbnail.jpg?project_id=1&search_key=\" + encodeURIComponent(this.callnumber);\n            if (loc.libraryCode === \"E51\" || loc.libraryCode === \"UPHZH\" ) {\n                src += \"&search_context2=\" + encodeURIComponent(this.sublocation);\n            }\n            if (loc.libraryCode === \"E65\") {\n                src += \"&e=\" + encodeURIComponent(this.recordid);\n            }\n        }\n        catch(e){\n            console.error(\"***ETH*** EthMapongoController.getMapongoImageSrc:\");\n            console.error(e.message);\n        }\n        return src;\n    }\n\n    getMapongoUrl() {\n        let url = \"\";\n        try{\n            let loc = this.parentCtrl.loc.location;\n            let baseUrl = this.ethMapongoLibrariesService.getBaseUrl(loc.libraryCode);\n\n            url = baseUrl + \"/viewer?project_id=1&search_key=\" + encodeURIComponent(this.callnumber) + \"&language=\" + this.lang + \"&e=\" + encodeURIComponent(this.recordid);\n            // ZHAW-HSB-WIN\n            if (loc.libraryCode === \"E51\" || loc.libraryCode === \"UPHZH\" ) {\n                url += \"&search_context2=\" + encodeURIComponent(this.sublocation);\n            }\n            if (this.barcode != \"\") {\n                    url += \"&bcd=\" + this.barcode;\n            }\n\n        }\n        catch(e){\n            console.error(\"***ETH*** EthMapongoController.getMapongoUrl:\");\n            console.error(e.message);\n        }\n        return url;\n    }\n\n    getMapongoQRC() {\n        let src = \"\";\n        try{\n            let loc = this.parentCtrl.loc.location;\n            let baseUrl = this.ethMapongoLibrariesService.getBaseUrl(loc.libraryCode);\n\n            src = baseUrl + \"/static_images/projects/1/search_qrcode.png?project_id=1&search_key=\" + encodeURIComponent(this.callnumber) + \"&language=\" + this.lang + \"&e=\" + encodeURIComponent(this.recordid);\n            if (loc.libraryCode === \"E51\" || loc.libraryCode === \"UPHZH\" ) {\n                src += \"&search_context2=\" + encodeURIComponent(this.sublocation);\n            }\n            if (this.barcode != \"\") {\n                src += \"&bcd=\" + this.barcode;\n            }\n        }\n        catch(e){\n            console.error(\"***ETH*** EthMapongoController.getMapongoQRC:\");\n            console.error(e.message);\n        }\n        return src;\n    }\n\n\n}\n\nethMapongoController.$inject = [ 'ethMapongoLibrariesService', 'ethConfigService', 'ethMapongoConfig'];\n","/**\n * @ngdoc module\n * @name ethMapongoModule\n *\n * @description\n * - renders Link, map and QRCode for mapongo\n *\n *\n * <b>AngularJS Dependencies</b><br>\n * Service {@link ETH.ethMapongoLibrariesService}<br>\n * Service /js/services {@link ETH.ethConfigService}<br>\n * Service {@link ETH.ethMapongoConfig}<br>\n *\n *\n * <b>CSS/Image Dependencies</b><br>\n * CSS /css/mapongo.css\n *\n * @example\n * ZHAW MMS IDs: 991128155109705501, 990013732410205503; 2 Exemplare: 990058665580205503; 5 Exemplare: 991129451879705501\n *\n */\nimport { ethConfigService } from './eth-config.service';\nimport { ethMapongoConfig } from './eth-mapongo.config';\nimport { ethMapongoLibrariesService } from './eth-mapongo-libraries.service';\nimport { ethMapongoController } from './eth-mapongo.controller';\nimport { ethMapongoHtml } from './eth-mapongo.html';\n\nexport const ethMapongoModule = angular\n    .module('ethMapongoModule', [])\n    .factory('ethConfigService', ethConfigService)\n    .factory('ethMapongoConfig', ethMapongoConfig)\n    .factory('ethMapongoLibrariesService', ethMapongoLibrariesService)\n    .controller('ethMapongoController', ethMapongoController)\n    .component('ethMapongo', {\n        bindings: {\n            afterCtrl: '<',\n            recordid: '@',\n            callnumber: '@',\n            barcode: '@',\n            sublocation: '@'\n        },\n        controller: 'ethMapongoController',\n        template: ethMapongoHtml\n    })","//--------\"i\" button ---------------------------------------\n\n\nexport class slspIButtonController {\n\n    constructor() {}\n\n    $onInit() {\n        try {\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n            this.getLibrary = getLibrary;\n            this.getLibraryCode = getLibraryCode;\n            this.getLanguage = getLanguage;\n            this.biblinkText = \"Library\";\n            this.biblinkBase = \"https:\\/\\/registration.slsp.ch\\/libraries\\/\\?library\\=\";\n\n            function getLibrary() {\n                if (this.parentCtrl.currLoc !== undefined && this.parentCtrl.currLoc.location !== undefined) {\n                    return this.parentCtrl.currLoc.location.librarycodeTranslation;\n            }\n            else {\n                return\n            }\n        }\n            function getLibraryCode() {\n                if (this.parentCtrl.currLoc !== undefined && this.parentCtrl.currLoc.location !== undefined) {\n                    return this.parentCtrl.currLoc.location.libraryCode;\n            }\n            else {\n                return\n            }\n        }\n\n            function getLanguage() {\n                if (this.parentCtrl.userSessionManagerService !== undefined) {\n                    return this.parentCtrl.userSessionManagerService.$location.$$search.lang;\n            }\n            else {\n                return\n            }\n        }\n\n        } catch (e) {\n            console.error(\"***SLSP*** an error occured: slspIButtonController\\n\\n\");\n            console.error(e.message);\n        }\n    }\n}\n\nslspIButtonController.$inject = [];","    import {slspIButtonController} from './slsp-i-button.controller';\n    import {slspIButtonHtml} from './slsp-i-button.html';\n  \n\n    export const slspIButtonModule = angular\n        .module('slspIButtonModule', [])\n            .controller('slspIButtonController', slspIButtonController)\n            .component('slspIButtonComponent', {\n                bindings: {afterCtrl: '<'},\n                controller: 'slspIButtonController',\n                template: slspIButtonHtml\n            })","\n\n//--------slspIconLabel ---------------------------------------\n\n\nexport class slspIconLabelLocationItemsController {\n\n    constructor( $scope, $compile, $timeout ) {\n        this.$scope = $scope;\n        this.$compile = $compile;\n        this.$timeout = $timeout;\n    }\n\n    \n\n    $onInit() {\n        try{\n            this.$timeout(() => {\n                this.parentCtrl = this.afterCtrl.parentCtrl;\n                \n                if (this.parentCtrl.serviceScrollId === \"getit_link1_0\") {\n                    \n                        this.iconLabelLocationItems = iconLabelLocationItems ;\n                        let iconLabelLocationItems = document.querySelectorAll(\"#getit_link1_0 > div > prm-full-view-service-container > div.section-body > div > prm-opac md-content > prm-location-items > md-list.separate-list-items.margin-left-medium.md-primoExplore-theme.layout-column\");\n                        let htmlLocationItems = `<div class=\"icnWrp\"><div class=\"iconDiv\"><svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Ebene_2\" width=\"100%\" height=\"100%\" viewBox=\"0 0 185 185\"><g id=\"System_icons\"><g><rect width=\"185\" height=\"185\" fill=\"none\" opacity=\".2\"/><g><rect x=\"32.65\" y=\"139.75\" width=\"119.7\" height=\"12.6\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><rect x=\"38.95\" y=\"70.45\" width=\"107.1\" height=\"69.3\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"164.95\" y1=\"152.35\" x2=\"20.05\" y2=\"152.35\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"51.55\" y1=\"70.45\" x2=\"51.55\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"83.05\" y1=\"70.45\" x2=\"83.05\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"70.45\" y1=\"70.45\" x2=\"70.45\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"101.95\" y1=\"70.45\" x2=\"101.95\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"114.55\" y1=\"70.45\" x2=\"114.55\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"133.45\" y1=\"70.45\" x2=\"133.45\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><polygon points=\"158.65 70.45 26.35 70.45 92.5 32.65 158.65 70.45\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/></g></g></g></svg></div><div class=\"iconLabel\" translate=\"customized.fee.physical\"></div></div>`;\n                                                                                        \n                            angular.element(iconLabelLocationItems).prepend(this.$compile(htmlLocationItems)(this.$scope)).addClass('icnLblLocationItems');\n                }\n                if (this.parentCtrl.serviceScrollId === \"getit_link1_1\") {\n                    \n                    this.iconLabelLocationItems3 = iconLabelLocationItems3 ;\n                    let iconLabelLocationItems3 = document.querySelectorAll(\"#getit_link1_1 > div > prm-full-view-service-container > div.section-body > div > prm-opac md-content > prm-location-items > md-list.separate-list-items.margin-left-medium.md-primoExplore-theme.layout-column\");\n                    let htmlLocationItems3 = `<div class=\"icnWrp\"><div class=\"iconDiv\"><svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Ebene_2\" width=\"100%\" height=\"100%\" viewBox=\"0 0 185 185\"><g id=\"System_icons\"><g><rect width=\"185\" height=\"185\" fill=\"none\" opacity=\".2\"/><g><rect x=\"32.65\" y=\"139.75\" width=\"119.7\" height=\"12.6\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><rect x=\"38.95\" y=\"70.45\" width=\"107.1\" height=\"69.3\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"164.95\" y1=\"152.35\" x2=\"20.05\" y2=\"152.35\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"51.55\" y1=\"70.45\" x2=\"51.55\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"83.05\" y1=\"70.45\" x2=\"83.05\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"70.45\" y1=\"70.45\" x2=\"70.45\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"101.95\" y1=\"70.45\" x2=\"101.95\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"114.55\" y1=\"70.45\" x2=\"114.55\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"133.45\" y1=\"70.45\" x2=\"133.45\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><polygon points=\"158.65 70.45 26.35 70.45 92.5 32.65 158.65 70.45\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/></g></g></g></svg></div><div class=\"iconLabel\" translate=\"customized.fee.physical\"></div></div>`;\n                                                                                    \n                        angular.element(iconLabelLocationItems3).prepend(this.$compile(htmlLocationItems3)(this.$scope)).addClass('icnLblLocationItems3');\n            }\n\n\n\n\n\n                if (this.parentCtrl.serviceScrollId === \"alma_other_members\") {\n                    \n                    this.iconLabelLocationItems2 = iconLabelLocationItems2 ;\n                    let iconLabelLocationItems2 = document.querySelectorAll(\"prm-alma-other-members md-content > prm-location-items > md-list.separate-list-items.margin-left-medium.md-primoExplore-theme.layout-column\");\n                    let htmlLocationItems2 = `<div class=\"icnWrp\"><div class=\"iconDiv\"><svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Ebene_2\" width=\"100%\" height=\"100%\" viewBox=\"0 0 185 185\"><g id=\"System_icons\"><g><rect width=\"185\" height=\"185\" fill=\"none\" opacity=\".2\"/><g><rect x=\"32.65\" y=\"139.75\" width=\"119.7\" height=\"12.6\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><rect x=\"38.95\" y=\"70.45\" width=\"107.1\" height=\"69.3\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"164.95\" y1=\"152.35\" x2=\"20.05\" y2=\"152.35\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"51.55\" y1=\"70.45\" x2=\"51.55\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"83.05\" y1=\"70.45\" x2=\"83.05\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"70.45\" y1=\"70.45\" x2=\"70.45\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"101.95\" y1=\"70.45\" x2=\"101.95\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"114.55\" y1=\"70.45\" x2=\"114.55\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"133.45\" y1=\"70.45\" x2=\"133.45\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><polygon points=\"158.65 70.45 26.35 70.45 92.5 32.65 158.65 70.45\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/></g></g></g></svg></div><div class=\"iconLabel\" translate=\"customized.fee.physical\"></div></div>`;\n                                                                                    \n                        angular.element(iconLabelLocationItems2).prepend(this.$compile(htmlLocationItems2)(this.$scope)).addClass('icnLblLocationItems2');\n            }\n\n\n                         \n                \n            },0);   \n        }\n        \n        catch(e){\n            console.error(\"***SLSP*** an error occured: Rapido \\n\\n\");\n            console.error(e.message);\n        }\n    }\n    \n}\n\nslspIconLabelLocationItemsController.$inject =  [ '$scope', '$compile', '$timeout'];\n\n","\n    import {slspIconLabelLocationItemsController} from './slsp-icon-label-location-items.controller';\n    import {slspIconLabelLocationItemsHtml} from './slsp-icon-label-location-items.html';\n\n    export const slspIconLabelLocationItemsModule = angular\n        .module('slspIconLabelLocationItemsModule', [])\n            .controller('slspIconLabelLocationItemsController', slspIconLabelLocationItemsController)\n            .component('slspIconLabelLocationItemsComponent', {\n                bindings: {afterCtrl: '<'},\n                controller: 'slspIconLabelLocationItemsController',\n                template: slspIconLabelLocationItemsHtml\n            })","import {ethLocationsFilterModule} from './eth-locations-filter/eth-locations-filter.module';\nimport {slspIconLabelLocationsModule} from './slsp-icon-label-locations/slsp-icon-label-locations.module';\nimport {slspCollapseRelatedModule} from './slsp-collapse-related/slsp-collapse-related.module';\n\nexport const ethLocationsAfterModule = angular\n    .module('ethLocationsAfterModule', [])\n        .component('prmLocationsAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<eth-locations-filter-component after-ctrl=\"$ctrl\"></eth-locations-filter-component><slsp-icon-label-locations-component after-ctrl=\"$ctrl\"></slsp-icon-label-locations-component><slsp-collapse-related-component after-ctrl=\"$ctrl\"></slsp-collapse-related-component><slsp-locations-after parent-ctrl=\"$parent.$ctrl\"></slsp-locations-after>`\n        });\n\nethLocationsAfterModule.requires.push(ethLocationsFilterModule.name);\nethLocationsAfterModule.requires.push(slspIconLabelLocationsModule.name);\nethLocationsAfterModule.requires.push(slspCollapseRelatedModule.name);","export class ethLocationsFilterController {\n\n    constructor($timeout, $scope) {\n        this.$timeout = $timeout;\n        this.$scope = $scope;\n    }\n\n    $onInit() {\n        try{\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n            this.$scope.$watch('this.$ctrl.parentCtrl.locations[0].location.librarycodeTranslation', (newValue, oldValue, scope) => {\n                if(!scope.$ctrl.parentCtrl.isLocationsFilterVisible && newValue && newValue != ''){\n                    this.$timeout(() => {\n                        scope.$ctrl.parentCtrl.isLocationsFilterVisible = true;\n                    }, 0);\n                }\n            }, true);\n        }\n        catch(e){\n            console.error(\"***ETH*** an error occured: ethLocationsFilterController\\n\\n\");\n            console.error(e.message);\n        }\n    }\n}\n\nethLocationsFilterController.$inject = ['$timeout', '$scope'];\n","/**\n* @ngdoc module\n* @name ethLocationsFilterModule\n*\n* @description\n*\n* Customization for the locations filter:<br>\n* - the locations filter is visible by default\n*\n* If there is 1 location: prmLocationItemsAfter\n*\n* If there are multiple locations: prmLocationAfter;\n* after all locations: prmLocationsAfter;\n* after choosing a location: prmLocationItemsAfter\n*\n*\n* <b>AngularJS Dependencies</b><br>\n*\n*\n* <b>CSS/Image Dependencies</b><br>\n* CSS eth-locations-filter.css\n*\n*\n*/\nimport {ethLocationsFilterController} from './eth-locations-filter.controller';\n\nexport const ethLocationsFilterModule = angular\n    .module('ethLocationsFilterModule', [])\n        .controller('ethLocationsFilterController', ethLocationsFilterController)\n        .component('ethLocationsFilterComponent', {\n            bindings: {afterCtrl: '<'},\n            controller: 'ethLocationsFilterController'\n        })\n","\n\n//--------CollapseRelated ---------------------------------------\n\n\nexport class slspCollapseRelatedController {\n\n    constructor($timeout, $scope) {\n        this.$timeout = $timeout;\n        this.$scope = $scope;\n    }\n\n    $onInit() {\n        try {\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n\n                if (angular.isArray(this.parentCtrl.locations) && this.parentCtrl.locations.length > 0) {\n    \n                this.parentCtrl.relatedLocationsListLimit = 0;\n\n                }\n              \n    }    \n            \n       \n        catch (e) {\n            console.error(\"***SLSP*** an error occured: slspCollapseRelatedController\\n\\n\");\n            console.error(e.message);\n        }\n    }\n }\n\n\nslspCollapseRelatedController.$inject =  ['$timeout', '$scope'];\n\n","\n    import {slspCollapseRelatedController} from './slsp-collapse-related.controller';\n    import {slspCollapseRelatedHtml} from './slsp-collapse-related.html';\n\n    export const slspCollapseRelatedModule = angular\n        .module('slspCollapseRelatedModule', [])\n            .controller('slspCollapseRelatedController', slspCollapseRelatedController)\n            .component('slspCollapseRelatedComponent', {\n                bindings: {afterCtrl: '<'},\n                controller: 'slspCollapseRelatedController',\n                template: slspCollapseRelatedHtml\n            })","\n\n//--------slspIconLabel ---------------------------------------\n\n\nexport class slspIconLabelLocationsController {\n\n    constructor( $scope, $compile, $timeout ) {\n        this.$scope = $scope;\n        this.$compile = $compile;\n        this.$timeout = $timeout;\n        \n    }\n\n    \n\n    $onInit() {\n        try{\n            this.$timeout(() => {\n                this.parentCtrl = this.afterCtrl.parentCtrl;\n                \n                if (this.parentCtrl.serviceScrollId === \"getit_link1_0\") {\n                    \n                        this.iconLabelLocations = iconLabelLocations ;\n                        let iconLabelLocations = document.querySelectorAll('#getit_link1_0 > div > prm-full-view-service-container > div.section-body > div > prm-opac md-tab-content md-content > prm-locations > div.padding-left-medium[ng-if=\"!$ctrl.enableLibraryLevelList\"] > md-list:nth-child(1)');\n                        let htmlLocations = `<div class=\"icnWrp\"><div class=\"iconDiv\"><svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Ebene_2\" width=\"100%\" height=\"100%\" viewBox=\"0 0 185 185\"><g id=\"System_icons\"><g><rect width=\"185\" height=\"185\" fill=\"none\" opacity=\".2\"/><g><rect x=\"32.65\" y=\"139.75\" width=\"119.7\" height=\"12.6\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><rect x=\"38.95\" y=\"70.45\" width=\"107.1\" height=\"69.3\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"164.95\" y1=\"152.35\" x2=\"20.05\" y2=\"152.35\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"51.55\" y1=\"70.45\" x2=\"51.55\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"83.05\" y1=\"70.45\" x2=\"83.05\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"70.45\" y1=\"70.45\" x2=\"70.45\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"101.95\" y1=\"70.45\" x2=\"101.95\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"114.55\" y1=\"70.45\" x2=\"114.55\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"133.45\" y1=\"70.45\" x2=\"133.45\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><polygon points=\"158.65 70.45 26.35 70.45 92.5 32.65 158.65 70.45\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/></g></g></g></svg></div><div class=\"iconLabel\" translate=\"customized.fee.physical\"></div></div>`;\n                            \n                            angular.element(iconLabelLocations).prepend(this.$compile(htmlLocations)(this.$scope)).addClass('icnLblLocations');\n                }\n                if (this.parentCtrl.serviceScrollId === \"getit_link1_1\") {\n                    \n                    this.iconLabelLocations3 = iconLabelLocations3 ;\n                    let iconLabelLocations3 = document.querySelectorAll('#getit_link1_1 > div > prm-full-view-service-container > div.section-body > div > prm-opac md-tab-content md-content > prm-locations > div.padding-left-medium[ng-if=\"!$ctrl.enableLibraryLevelList\"] > md-list:nth-child(1)');\n                    let htmlLocations3 = `<div class=\"icnWrp\"><div class=\"iconDiv\"><svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Ebene_2\" width=\"100%\" height=\"100%\" viewBox=\"0 0 185 185\"><g id=\"System_icons\"><g><rect width=\"185\" height=\"185\" fill=\"none\" opacity=\".2\"/><g><rect x=\"32.65\" y=\"139.75\" width=\"119.7\" height=\"12.6\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><rect x=\"38.95\" y=\"70.45\" width=\"107.1\" height=\"69.3\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"164.95\" y1=\"152.35\" x2=\"20.05\" y2=\"152.35\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"51.55\" y1=\"70.45\" x2=\"51.55\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"83.05\" y1=\"70.45\" x2=\"83.05\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"70.45\" y1=\"70.45\" x2=\"70.45\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"101.95\" y1=\"70.45\" x2=\"101.95\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"114.55\" y1=\"70.45\" x2=\"114.55\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"133.45\" y1=\"70.45\" x2=\"133.45\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><polygon points=\"158.65 70.45 26.35 70.45 92.5 32.65 158.65 70.45\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/></g></g></g></svg></div><div class=\"iconLabel\" translate=\"customized.fee.physical\"></div></div>`;\n                        \n                        angular.element(iconLabelLocations3).prepend(this.$compile(htmlLocations3)(this.$scope)).addClass('icnLblLocations3');\n            }\n\n\n\n\n\n                if (this.parentCtrl.serviceScrollId === \"alma_other_members\") {\n                    \n                    this.iconLabelLocations2 = iconLabelLocations2 ;\n                    let iconLabelLocations2 = document.querySelectorAll('prm-alma-other-members prm-opac md-tab-content md-content > prm-locations > div.padding-left-medium[ng-if=\"!$ctrl.enableLibraryLevelList\"] > md-list:nth-child(1)');\n                    let htmlLocations2 = `<div class=\"icnWrp\"><div class=\"iconDiv\"><svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Ebene_2\" width=\"100%\" height=\"100%\" viewBox=\"0 0 185 185\"><g id=\"System_icons\"><g><rect width=\"185\" height=\"185\" fill=\"none\" opacity=\".2\"/><g><rect x=\"32.65\" y=\"139.75\" width=\"119.7\" height=\"12.6\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><rect x=\"38.95\" y=\"70.45\" width=\"107.1\" height=\"69.3\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"164.95\" y1=\"152.35\" x2=\"20.05\" y2=\"152.35\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"51.55\" y1=\"70.45\" x2=\"51.55\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"83.05\" y1=\"70.45\" x2=\"83.05\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"70.45\" y1=\"70.45\" x2=\"70.45\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"101.95\" y1=\"70.45\" x2=\"101.95\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"114.55\" y1=\"70.45\" x2=\"114.55\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"133.45\" y1=\"70.45\" x2=\"133.45\" y2=\"139.75\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><polygon points=\"158.65 70.45 26.35 70.45 92.5 32.65 158.65 70.45\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/></g></g></g></svg></div><div class=\"iconLabel\" translate=\"customized.fee.physical\"></div></div>`;\n                        \n                        angular.element(iconLabelLocations2).prepend(this.$compile(htmlLocations2)(this.$scope)).addClass('icnLblLocations2');\n            }\n               \n            \n                \n            },0);   \n        }\n        \n        catch(e){\n            console.error(\"***SLSP*** an error occured: Rapido \\n\\n\");\n            console.error(e.message);\n        }\n    }\n    \n}\n\nslspIconLabelLocationsController.$inject =  [ '$scope', '$compile', '$timeout'];\n\n\n\n// md-content > prm-locations > div.padding-left-medium > md-list.separate-list-items.margin-bottom-medium.padding-bottom-zero.md-primoExplore-theme\n","\n    import {slspIconLabelLocationsController} from './slsp-icon-label-locations.controller';\n    import {slspIconLabelLocationsHtml} from './slsp-icon-label-locations.html';\n\n    export const slspIconLabelLocationsModule = angular\n        .module('slspIconLabelLocationsModule', [])\n            .controller('slspIconLabelLocationsController', slspIconLabelLocationsController)\n            .component('slspIconLabelLocationsComponent', {\n                bindings: {afterCtrl: '<'},\n                controller: 'slspIconLabelLocationsController',\n                template: slspIconLabelLocationsHtml\n            })","\n\n//-----------------------------------------------\n\n\nexport class slspEditPersonalDetailsController {\n\n    constructor($scope, $element) {\n        this.$scope = $scope;\n        this.$element = $element;\n\n    }\n\n    $doCheck() {\n        try {\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n\n\n\n            let lang = 'en';\n            let sms = this.$scope.$root.$$childHead.$ctrl.userSessionManagerService;\n            if (sms) {\n                lang = sms.getInterfaceLanguage();\n            }\n\n            this.detailsBaseEdu = \"https:\\/\\/eduid.ch\\/web\\/change-account-data\\/2\\/?lang=\" + lang;\n            this.detailsBaseReg = \"https:\\/\\/registration.slsp.ch\\/library-card\\/?lang=\" + lang;\n            this.exclude = ['STAFF', '11', '12', '13', '14', '15', '16', '91', '92', '99'];\n            this.grpA = ['11', '91', '92'];\n            this.grpB = ['12', '13', '14', '15', '16'];\n\n\n            this.getPatronGrp = function () {\n                if (this.parentCtrl.personalInfoService.personalInfo !== undefined) {\n                    let patron = this.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\n                    if (!this.exclude.includes(patron)) {\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                }\n                return false;\n            }\n\n            this.grpLabelA = function () {\n                if (this.parentCtrl.personalInfoService.personalInfo !== undefined) {\n                    let labelA = this.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\n                    if (this.grpA.includes(labelA)) {\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                }\n                return false;\n            }\n\n\n            this.grpLabelB = function () {\n                if (this.parentCtrl.personalInfoService.personalInfo !== undefined) {\n                    let labelB = this.parentCtrl.personalInfoService.personalInfo.patronstatus[0].registration[0].institution[0].patronstatuscode;\n                    if (this.grpB.includes(labelB)) {\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                }\n                return false;\n            }\n\n            this.buttonMove = function () {\n                let parentElement = angular.element(document.querySelector('md-card > md-card-content > prm-personal-settings > prm-personal-settings-after'));\n                let element = angular.element(document.querySelector('#SLSPeditPersonalDetails'));\n                parentElement.append(element);\n            }\n\n\n        }\n        catch (e) {\n            console.error(\"***SLSP*** an error occured: EditPersonalDetailsController\\n\\n\");\n            console.error(e.message);\n        }\n    }\n}\n\nslspEditPersonalDetailsController.$inject = ['$scope'];\n\n","import {slspEditPersonalDetailsController} from './slsp-edit-personal-details.controller';\nimport {slspEditPersonalDetailsHtml} from './slsp-edit-personal-details.html';\n\n\nexport const slspEditPersonalDetailsModule = angular\n    .module('slspEditPersonalDetailsModule', [])\n        .controller('slspEditPersonalDetailsController', slspEditPersonalDetailsController)\n        .component('slspEditPersonalDetailsComponent', {\n            bindings: {afterCtrl: '<'},\n            controller: 'slspEditPersonalDetailsController',\n            template: slspEditPersonalDetailsHtml\n        })","import {slspEditPersonalDetailsModule} from './slsp-edit-personal-details/slsp-edit-personal-details.module';\n\n\nexport const slspPersonalInfoAfterModule = angular\n    .module('slspPersonalInfoAfterModule', [])\n        .component('prmPersonalInfoAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<slsp-edit-personal-details-component after-ctrl=\"$ctrl\" id=\"SLSPeditPersonalDetails\"></slsp-edit-personal-details-component><slsp-personal-info-after parent-ctrl=\"$parent.$ctrl\"></slsp-personal-info-after>`\n        });\n\n        slspPersonalInfoAfterModule.requires.push(slspEditPersonalDetailsModule.name);\n\n","export class bcuFeesLinkController {\n\n    constructor($element) {\n        this.$element = $element[0];\n        this.form = this.$element.parentElement.parentElement;\n        this.display = false;\n    }\n\n    $doCheck() {\n      let form = false;\n      //console.log('old-module');\n            if (this.form.children[0].children[1] !== undefined && this.form.children[0].children[1].children[0] !== undefined) {\n                form = this.form.children[0].children[1].children[0];\n            }\n            else if (this.form.children[0].children[0] !== undefined && this.form.children[0].children[0].children[0] !== undefined) {\n                form = this.form.children[0].children[0].children[0];\n            }\n\n            //create and insert info block if not present\n\n            if (form && form.children.length >= 2 && this.display === false) {\n                this.display = true;\n                let info = document.createElement('DIV');\n                info.className = \"courier-info bar alert-bar\";\n                info.innerHTML =\n                `<h4>${this.afterCtrl.parentCtrl.$translate.instant('customize.fullview.feesTitle')}</h4>\n\t\t<p>${this.afterCtrl.parentCtrl.$translate.instant('customize.fullview.feesInfo')}</p>\n\t\t<p><a href=\"${this.afterCtrl.parentCtrl.$translate.instant('customize.fullview.feesUrl')}\"\n\t\ttarget=\"_blank\">${this.afterCtrl.parentCtrl.$translate.instant('customize.fullview.feesLinkText')}</a></p>`;\n                form.insertBefore(info, form.children[form.children.length -1]);\n            }\n        }\n}\n\nbcuFeesLinkController.$inject = ['$element'];","\n    import {bcuFeesLinkController} from './bcu-fees-link.controller';\n\n\n    export const bcuFeesLinkModule = angular\n        .module('bcuFeesLinkModule', [])\n            .controller('bcuFeesLinkController', bcuFeesLinkController)\n            .component('bcuFeesLinkComponent', {\n                bindings: {afterCtrl: '<'},\n                controller: 'bcuFeesLinkController',\n                \n            })","export class slspAlmaRequestController {\n\n    constructor($scope, $compile, $timeout) {\n        this.$scope = $scope;\n        this.$compile = $compile;\n        this.$timeout = $timeout;\n    }\n\n    $doCheck() {\n        try {\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n\n                if (this.parentCtrl.serviceType == 'AlmaRequest' || this.parentCtrl.serviceType == 'AlmaItemRequest' || this.parentCtrl.serviceType == 'AlmaRequestAnyItem' || this.parentCtrl.serviceType == 'AlmaRequestOther') {\n\n                    this.requestLoan = requestLoan;\n                    let requestLoan = document.querySelectorAll('prm-opac form[name=\"requestForm\"]');\n                    \n                    angular.element(requestLoan).addClass('almaRequestLoan');\n\n                }\n\n                else if (this.parentCtrl.serviceType == 'AlmaDigitization' || this.parentCtrl.serviceType == 'AlmaDigitizationOther' || this.parentCtrl.serviceType == 'AlmaGeneralDigitization' || this.parentCtrl.serviceType == 'AlmaItemDigitization' || this.parentCtrl.serviceType == 'AlmaResourceSharing' ) {\n                    this.requestDigi = requestDigi;\n                    let requestDigi = document.querySelectorAll('prm-opac form[name=\"requestForm\"]');\n                    angular.element(requestDigi).removeClass('almaRequestLoan');\n                }\n\n            } catch (e) {\n                console.error(\"***SLSP*** an error occured: slspAlmaRequestController \\n\\n\");\n                console.error(e.message);\n            }\n        }\n    \n    \n    }\n    \n\n            \n\nslspAlmaRequestController.$inject = ['$scope', '$compile', '$timeout'];","\n    import {slspAlmaRequestController} from './slsp-alma-request.controller';\n\n\n    export const slspAlmaRequestModule = angular\n        .module('slspAlmaRequestModule', [])\n            .controller('slspAlmaRequestController', slspAlmaRequestController)\n            .component('slspAlmaRequestComponent', {\n                bindings: {afterCtrl: '<'},\n                controller: 'slspAlmaRequestController',\n                \n            })\n\n","import {bcuFeesLinkModule} from './bcu-fees-link/bcu-fees-link.module';\nimport {slspAlmaRequestModule} from './slsp-alma-request/slsp-alma-request.module';\n\n\nexport const slspRequestAfterModule = angular\n    .module('slspRequestAfterModule', [])\n        .component('prmRequestAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<bcu-fees-link-component after-ctrl=\"$ctrl\"></bcu-fees-link-component>\n            <slsp-alma-request-component after-ctrl=\"$ctrl\"></slsp-alma-request-component>\n            <slsp-request-after parent-ctrl=\"$parent.$ctrl\"></slsp-request-after>`\n        });\n\nslspRequestAfterModule.requires.push(bcuFeesLinkModule.name);\nslspRequestAfterModule.requires.push(slspAlmaRequestModule.name);\n","\n\n//--------RequestCancelButton ---------------------------------------\n\n\nexport class slspRequestCancelButtonController {\n\n    constructor( $scope) {\n        this.$scope = $scope;\n        \n    }\n\n    $onInit() {\n        try{\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n\n            this.$scope.$watch('this.$ctrl.parentCtrl.requestsDisplay', (currentRequestArray) => {\n\n                if (angular.isArray(currentRequestArray) && currentRequestArray.length > 0)\n    \n                    angular.forEach(currentRequestArray, (request) => {\n    \n                        \n                        if (request.requestType === 'ill' ) {\n                            if (request.statusCode === 'DELIVERED' || \n                                request.statusCode === 'LOST_COMMUNICATED' || \n                                request.statusCode === 'RECALLED_BOR' || \n                                request.statusCode === 'RECEIVED_DIGITALLY' || \n                                request.statusCode === 'RECEIVED_NOT_FOR_LOAN' || \n                                request.statusCode === 'RECEIVED_PHYSICALLY' || \n                                request.statusCode === 'RENEWED' || \n                                request.statusCode === 'RENEW_NOT_ACCEPTED' || \n                                request.statusCode === 'RENEW_REQUESTED' || \n                                request.statusCode === 'REQUEST_COMPLETED' || \n                                request.statusCode === 'SHIPPED_DIGITALLY' || \n                                request.statusCode === 'SHIPPED_PHYSICALLY') {\n    \n                                    request.isCancelable = false;\n    \n                            }\n                            else {\n                                    request.isCancelable = true;\n                            }\n                        }\n                    }\n               )   \n            }\n         )\n           \n        }\n        \n        catch(e){\n            console.error(\"***SLSP*** an error occured: RequestCancelButton \\n\\n\");\n            console.error(e.message);\n        }\n    }\n\n  \n}\n\nslspRequestCancelButtonController.$inject =  ['$scope'];\n\n","\n    import {slspRequestCancelButtonController} from './slsp-request-cancel-button.controller';\n    \n\n    export const slspRequestCancelButtonModule = angular\n        .module('slspRequestCancelButtonModule', [])\n            .controller('slspRequestCancelButtonController', slspRequestCancelButtonController)\n            .component('slspRequestCancelButtonComponent', {\n                bindings: {afterCtrl: '<'},\n                controller: 'slspRequestCancelButtonController',\n                \n            })","\nimport {slspRequestCancelButtonModule} from './slsp-request-cancel-button/slsp-request-cancel-button.module';\n\nexport const slspRequestsAfterModule = angular\n    .module('slspRequestsAfterModule', [])\n        .component('prmRequestsAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<slsp-request-cancel-button-component after-ctrl=\"$ctrl\"></slsp-request-cancel-button-component><slsp-requests-after parent-ctrl=\"$parent.$ctrl\"></slsp-requests-after>`\n        });\n\n\nslspRequestsAfterModule.requires.push(slspRequestCancelButtonModule.name);","import {bcuSearchSlotsModule} from './bcu-search-slots/bcu-search-slots.module';\n\nexport const bcuSearchBarAfterModule = angular\n    .module('bcuSearchBarAfterModule', [])\n        .component('prmSearchBarAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<bcu-search-slots-component after-ctrl=\"$ctrl\"></bcu-search-slots-component><slsp-search-bar-after parent-ctrl=\"$parent.$ctrl\"></slsp-search-bar-after>`\n        });\n\nbcuSearchBarAfterModule.requires.push(bcuSearchSlotsModule.name);\n","export class bcuSearchSlotsController {\n\n    $onInit() {\n        this.parentCtrl = this.afterCtrl.parentCtrl;\n        this.parentCtrl.showTabsAndScopes = true;\n    };\n\n}\n","/**\n* @ngdoc module\n* @name bcuSearchSlotsModule\n*\n* @description\n*\n* Customization for the search bar:<br>\n* - Tabs and scopes are displayed even if the search has not yet taken place (empty searchfield).\n*\n* <b>AngularJS Dependencies</b><br>\n*\n*\n* <b>CSS/Image Dependencies</b><br>\n*\n*\n* @example\n*\n*/\nimport {bcuSearchSlotsController} from './bcu-search-slots.controller';\n\nexport const bcuSearchSlotsModule = angular\n    .module('bcuSearchSlotsModule', [])\n        .controller('bcuSearchSlotsController', bcuSearchSlotsController)\n        .component('bcuSearchSlotsComponent',  {\n            bindings: {afterCtrl: '<'},\n            controller: 'bcuSearchSlotsController'\n        })\n","\nimport {slspDigitizationButtonLabelModule} from './slsp-digitization-button-label/slsp-digitization-button-label.module';\n\nexport const prmServiceButtonAfterModule = angular\n    .module('prmServiceButtonAfterModule', [])\n        .component('prmServiceButtonAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<slsp-digitization-button-label-component after-ctrl=\"$ctrl\"></slsp-digitization-button-label-component><slsp-service-button-after parent-ctrl=\"$parent.$ctrl\"></slsp-service-button-after>`\n        });\n\n        prmServiceButtonAfterModule.requires.push(slspDigitizationButtonLabelModule.name);\n","\n\n//--------slspDigitizationButtonLabelController ---------------------------------------\n\n\nexport class slspDigitizationButtonLabelController {\n\n    constructor( $scope, $compile, $timeout ) {\n        this.$scope = $scope;\n        this.$compile = $compile;\n        this.$timeout = $timeout;\n    }\n\n    $onInit() {\n        try{\n            this.$timeout(() => {\n                this.parentCtrl = this.afterCtrl.parentCtrl;\n                               \n                if (this.parentCtrl.service.type !== undefined && this.parentCtrl.service.type === 'AlmaDigitization'){\n                    \n                    this.digiButtonLabel = digiButtonLabel;\n                    let digiButtonLabel = document.querySelectorAll('prm-full-view-service-container prm-service-button button span[translate=\"AlmaDigitization\"]');\n                    let html = `<div class=\"DigiButtonLabel1\">CHF</div>`;\n                        \n                        angular.element(digiButtonLabel).after(html).addClass('digiButton');\n                    }\n                    \n\n                if (this.parentCtrl.service.type !== undefined && this.parentCtrl.service.type === 'AlmaGeneralDigitization'){\n                    \n                this.digiButtonLabel = digiButtonLabel;\n                let digiButtonLabel = document.querySelectorAll('prm-full-view-service-container prm-service-button button span[translate=\"AlmaGeneralDigitization\"]');\n                let html = `<div class=\"DigiButtonLabel1\">CHF</div>`;\n                    \n                    angular.element(digiButtonLabel).after(html).addClass('digiButton');\n                }\n                \n\n                if (this.parentCtrl.service.type !== undefined && this.parentCtrl.service.type === 'AlmaItemDigitization'){\n                    this.digiItemButtonLabel = digiItemButtonLabel;\n                    let digiItemButtonLabel = document.querySelectorAll('prm-full-view-service-container prm-service-button button span[translate=\"AlmaItemDigitization\"]');\n                    \n                    //let htmlItem = `<div class=\"DigiButtonLabel\" translate=\"customized.fee.digi\"></div>`;\n                    \n                        \n                        angular.element(digiItemButtonLabel).append(`<div class=\"DigiButtonLabel\">CHF</div>`).addClass('digiButton');\n                    }\n                        else {\n                        return\n                    }\n                    \n                \n                \n            }, 1000);   \n        }\n        \n        catch(e){\n            console.error(\"***SLSP*** an error occured: Rapido \\n\\n\");\n            console.error(e.message);\n        }\n    }\n\n  \n}\n\nslspDigitizationButtonLabelController.$inject =  [ '$scope', '$compile', '$timeout'];\n\n","\n    import {slspDigitizationButtonLabelController} from './slsp-digitization-button-label.controller';\n    import {slspDigitizationButtonLabelHtml} from './slsp-digitization-button-label.html';\n\n    export const slspDigitizationButtonLabelModule = angular\n        .module('slspDigitizationButtonLabelModule', [])\n            .controller('slspDigitizationButtonLabelController', slspDigitizationButtonLabelController)\n            .component('slspDigitizationButtonLabelComponent', {\n                bindings: {afterCtrl: '<'},\n                controller: 'slspDigitizationButtonLabelController',\n                template: slspDigitizationButtonLabelHtml\n            })","export class bcuRapidoNoFurtherOptionsController {\n\n    constructor($scope) {\n        this.$scope = $scope;\n    }\n\n    $doCheck() {\n        try {\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n            let msg = this.parentCtrl.almaRSServiceAvailable;\n            let isi = this.parentCtrl.isSignedIn();\n\n            let rapidoSection = document.getElementById('rapidoOffer');\n            let rapidoTOC = document.querySelector('button span[translate=\"brief.results.tabs.Get_it_from_other_locations\"]');\n\n            //console.log(\"msg:\", this.parentCtrl.almaRSServiceAvailable, \"isi:\", this.parentCtrl.isSignedIn(), rapidoTOC.parentElement, rapidoSection);\n\n            if (msg == \"false\" && isi == \"true\") {\n                angular.element(rapidoSection).addClass('slsp-hide-rapido');\n                angular.element(rapidoTOC.parentElement).addClass('slsp-hide-rapido');\n            } else {\n                if (angular.element(rapidoSection).hasClass('slsp-hide-rapido')) {\n                    angular.element(rapidoSection).removeClass('slsp-hide-rapido');\n                }\n                if (angular.element(rapidoTOC.parentElement).hasClass('slsp-hide-rapido')) {\n                    angular.element(rapidoTOC.parentElement).removeClass('slsp-hide-rapido');\n                }\n            }\n        } catch (e) {\n            console.error(\"***SLSP*** an error occured: Rapido no Further Options\\n\\n\");\n            console.error(e.message);\n        }\n    }\n\n}\n\nbcuRapidoNoFurtherOptionsController.$inject = ['$scope'];","import {bcuRapidoNoFurtherOptionsController} from './bcu-rapido-no-further-options.controller';\n//import {slspIllSigninOrderLoggedOutService} from '../../prm-user-area-expandable-after/slsp-ill-signin-order-logged-out/slsp-ill-signin-order-logged-out.service';\n\nexport const bcuRapidoNoFurtherOptionsModule = angular\n    .module('bcuRapidoNoFurtherOptionsModule', [])\n        //.factory('slspIllSigninOrderLoggedOutService', slspIllSigninOrderLoggedOutService)\n        .controller('bcuRapidoNoFurtherOptionsController', bcuRapidoNoFurtherOptionsController)\n        .component('bcuRapidoNoFurtherOptions', {\n            bindings: {afterCtrl: '<'},\n            controller: 'bcuRapidoNoFurtherOptionsController'\n        })","import { slspRapidoFeesLinkModule } from './slsp-rapido-fees-link/slsp-rapido-fees-link.module';\nimport { bcuRapidoNoFurtherOptionsModule } from './bcu-rapido-no-further-options/bcu-rapido-no-further-options.module';\n\n\nexport const prmServiceNgrsAfterModule = angular\n    .module('prmServiceNgrsAfterModule', [])\n    .component('prmServiceNgrsAfter', {\n        bindings: { parentCtrl: '<' },\n        template: `<slsp-rapido-fees-link-component after-ctrl=\"$ctrl\"></slsp-rapido-fees-link-component>\n            <bcu-rapido-no-further-options after-ctrl=\"$ctrl\"></bcu-rapido-no-further-options>\n            <slsp-service-ngrs-after parent-ctrl=\"$parent.$ctrl\"></<slsp-service-ngrs-after>`\n    });\n\nprmServiceNgrsAfterModule.requires.push(slspRapidoFeesLinkModule.name);\nprmServiceNgrsAfterModule.requires.push(bcuRapidoNoFurtherOptionsModule.name);","\n\n//--------Rapido Fees Link ---------------------------------------\n\n\nexport class slspRapidoFeesLinkController {\n\n    constructor( $scope, $compile ) {\n        this.$scope = $scope;\n        this.$compile = $compile;\n        \n    }\n\n      \n    $onInit() {\n            try{\n                this.parentCtrl = this.afterCtrl.parentCtrl;\n                this.rapidoFeesLink = rapidoFeesLink;\n                \n                let rapidoFeesLink = document.querySelector('#rapidoOffer div.full-view-section-content prm-full-view-service-container div.section-head h4');\n                let html = `<div class=\"rapidoFeesLink neutralized-button arrow-link-button md-button md-primoExplore-theme md-ink-ripple\"><a href=\"${this.afterCtrl.parentCtrl.$translate.instant('customize.fullview.feesUrl')}\" target=\"_blank\"><span translate=\"customized.rapido.fees\">see fees details via link</span><prm-icon link-arrow=\"\" icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"chevron-right\" [display-mode]=\"::$ctrl.displayMode\"><!----><md-icon ng-if=\"::($ctrl.iconDefinition &amp;&amp; !$ctrl.isCustom &amp;&amp; !$ctrl.isEmailMode())\" md-svg-icon=\"primo-ui:chevron-right\" role=\"presentation\" class=\"md-primoExplore-theme\"><svg id=\"chevron-right_cache76\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\" y=\"384\" xmlns=\"http://www.w3.org/2000/svg\" fit=\"\" preserveAspectRatio=\"xMidYMid meet\" focusable=\"false\">\n                <path d=\"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z\"></path>\n            </svg></md-icon><!----><!----><prm-icon-after parent-ctrl=\"$ctrl\"></prm-icon-after></prm-icon></a></div>`;\n                        \n                    angular.element(rapidoFeesLink).after(this.$compile(html)(this.$scope));\n            }\n                               \n            \n            catch(e){\n                console.error(\"***SLSP*** an error occured: Rapido Fees Link\\n\\n\");\n                console.error(e.message);\n            }\n        }\n    }\n\n    slspRapidoFeesLinkController.$inject = ['$scope', '$compile'];\n","\n    import {slspRapidoFeesLinkController} from './slsp-rapido-fees-link.controller';\n    import {slspRapidoFeesLinkHtml} from './slsp-rapido-fees-link.html';\n\n    export const slspRapidoFeesLinkModule = angular\n        .module('slspRapidoFeesLinkModule', [])\n            .controller('slspRapidoFeesLinkController', slspRapidoFeesLinkController)\n            .component('slspRapidoFeesLinkComponent', {\n                bindings: {afterCtrl: '<'},\n                controller: 'slspRapidoFeesLinkController',\n                template: slspRapidoFeesLinkHtml\n            })","export class ethDisableRequestButtonController {\n\n    $onInit() {\n        try{\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n            this.processDoCheck = true;\n        }\n        catch(e){\n            console.error(\"***ETH*** an error occured: ethDisableRequestButtonController \\n\\n\");\n            console.error(e.message);\n        }\n    }\n\n    $doCheck() {\n        try{\n            if(!this.processDoCheck || !document.querySelector('prm-service-physical-best-offer .offer_details .rota_line > div > span'))return;\n            let noAvailableCopies = document.querySelector('[translate=\"rapido.tiles.physical.no_best_offer.line_2\"]');\n            if(noAvailableCopies){\n                let requestButton = document.querySelector('#get_it_btn_physical');\n                angular.element(requestButton).attr('disabled', 'disabled');\n            }\n            this.processDoCheck = false;\n        }\n        catch(e){\n            console.error(\"***ETH*** an error occured: ethDisableRequestButtonController $doCheck\\n\\n\");\n            console.error(e.message);\n        }\n    }\n}\n","import {ethDisableRequestButtonController} from './eth-disable-request-button.controller';\n\nexport const ethDisableRequestButtonModule = angular\n    .module('ethDisableRequestButtonModule', [])\n        .controller('ethDisableRequestButtonController', ethDisableRequestButtonController)\n        .component('ethDisableRequestButtonComponent',  {\n            bindings: {afterCtrl: '<'},\n            controller: 'ethDisableRequestButtonController',\n        })\n","\nimport {slspRapidoDigitalOfferModule} from './slsp-rapido-digital-offer/slsp-rapido-digital-offer.module';\nimport {slspIconLabelRapidoModule} from './slsp-icon-label-rapido/slsp-icon-label-rapido.module';\nimport {ethDisableRequestButtonModule} from './eth-disable-request-button/eth-disable-request-button.module';\n\nexport const prmServicePhysicalBestOfferAfterModule = angular\n    .module('prmServicePhysicalBestOfferAfterModule', [])\n        .component('prmServicePhysicalBestOfferAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<slsp-rapido-digital-offer-component after-ctrl=\"$ctrl\"></slsp-rapido-digital-offer-component>\n            <slsp-icon-label-rapido-component after-ctrl=\"$ctrl\"></slsp-icon-label-rapido-component>\n            <eth-disable-request-button-component after-ctrl=\"$ctrl\"></eth-disable-request-button-component>\n            <slsp-service-physical-best-offer-after parent-ctrl=\"$parent.$ctrl\"></slsp-service-physical-best-offer-after>`,\n        });\n\nprmServicePhysicalBestOfferAfterModule.requires.push(slspRapidoDigitalOfferModule.name);\nprmServicePhysicalBestOfferAfterModule.requires.push(slspIconLabelRapidoModule.name);\nprmServicePhysicalBestOfferAfterModule.requires.push(ethDisableRequestButtonModule.name);","//--------slspIconLabel ---------------------------------------\n\n\nexport class slspIconLabelRapidoController {\n\n    constructor($scope, $compile, $timeout) {\n        this.$scope = $scope;\n        this.$compile = $compile;\n        this.$timeout = $timeout;\n    }\n\n\n\n    $onInit() {\n        try {\n            this.$timeout(() => {\n                this.parentCtrl = this.afterCtrl.parentCtrl;\n\n                /*icon label*/\n                if (this.parentCtrl.isdigitaloffer === true) {\n                    this.iconLabel = iconLabel;\n\n                    let iconLabel = document.querySelectorAll('#item-ngrs > div > div > div[ng-if=\"$ctrl.digitalTileVisible\"] > prm-service-physical-best-offer > div > div.icon-wrapper');\n                    let html1 = `<div class=\"icnWrp\"><div class=\"iconDiv\"><svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Ebene_2\" width=\"100%\" height=\"100%\" viewBox=\"0 0 185 185\"><g id=\"System_icons\"><g><rect width=\"185\" height=\"185\" fill=\"none\" opacity=\".2\"/><g><g><circle cx=\"130\" cy=\"130\" r=\"10.57\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><path d=\"M145.26,152.31c-4.34,2.98-9.6,4.69-15.26,4.69-14.91,0-27-12.09-27-27s12.09-27,27-27,27,12.09,27,27v2.35c0,4.54-3.68,8.21-8.21,8.21s-8.22-3.68-8.22-8.21v-2.35\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/></g><g><path d=\"M88.91,130H37c-4.97,0-9-4.03-9-9V55c0-4.96,4.03-9,9-9h108c4.97,0,9,4.04,9,9v42.32\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><polyline points=\"151 49 91 97 31 49\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/></g></g></g></g></svg></div><div class=\"iconLabel\" translate=\"customized.fee.digi\"></div></div>`;\n\n\n                    angular.element(iconLabel).after(this.$compile(html1)(this.$scope)).addClass('icnLbl');\n                }\n\n                if (this.parentCtrl.isdigitaloffer !== true) {\n                    this.iconLabel2 = iconLabel2;\n                    let iconLabel2 = document.querySelectorAll('#item-ngrs > div > div > div[ng-if=\"$ctrl.physicalTileVisible\"] > prm-service-physical-best-offer > div > div.icon-wrapper');\n                    let html2 = `<div class=\"icnWrp\"><div class=\"iconDiv\"><svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Ebene_2\" width=\"100%\" height=\"100%\" viewBox=\"0 0 185 185\"><g id=\"System_icons\"><g><rect width=\"185\" height=\"185\" fill=\"none\" opacity=\".2\"/><g><line x1=\"6.16\" y1=\"82.58\" x2=\"29.16\" y2=\"82.62\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"17.66\" y1=\"97.91\" x2=\"29.16\" y2=\"97.95\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"25.33\" y1=\"113.24\" x2=\"29.16\" y2=\"113.28\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><g><circle cx=\"151.84\" cy=\"125.5\" r=\"12\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><circle cx=\"67.84\" cy=\"125.5\" r=\"12\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><polyline points=\"163.84 125.5 178.84 125.5 178.84 98.5 160.47 65.84 124.84 65.84 124.84 47.5 40.84 47.5 40.84 125.5 55.84 125.5\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"139.84\" y1=\"125.5\" x2=\"79.84\" y2=\"125.5\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"124.84\" y1=\"53.5\" x2=\"124.84\" y2=\"125.5\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/><line x1=\"178.84\" y1=\"98.5\" x2=\"124.84\" y2=\"98.5\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"6\"/></g></g></g></g></svg></div><div class=\"iconLabel\" translate=\"customized.fee.courier\">Courier</div><div class=\"courierInfo\" translate=\"customized.fee.localcourier\">blabla bla Blaabl bla</div></div>`;\n\n                    angular.element(iconLabel2).after(this.$compile(html2)(this.$scope)).addClass('icnLbl2');\n                }\n\n\n            }, 0);\n        } catch (e) {\n            console.error(\"***SLSP*** an error occured: Rapido \\n\\n\");\n            console.error(e.message);\n        }\n    }\n\n}\n\nslspIconLabelRapidoController.$inject = ['$scope', '$compile', '$timeout'];\n\n\n\n// md-content > prm-locations > div.padding-left-medium > md-list.separate-list-items.margin-bottom-medium.padding-bottom-zero.md-primoExplore-theme","\n    import {slspIconLabelRapidoController} from './slsp-icon-label-rapido.controller';\n    import {slspIconLabelRapidoHtml} from './slsp-icon-label-rapido.html';\n\n    export const slspIconLabelRapidoModule = angular\n        .module('slspIconLabelRapidoModule', [])\n            .controller('slspIconLabelRapidoController', slspIconLabelRapidoController)\n            .component('slspIconLabelRapidoComponent', {\n                bindings: {afterCtrl: '<'},\n                controller: 'slspIconLabelRapidoController',\n                template: slspIconLabelRapidoHtml\n            })","export class slspRapidoDigitalOfferController {\n\n    constructor($scope, $compile, $timeout) {\n        this.$scope = $scope;\n        this.$compile = $compile;\n        this.$timeout = $timeout;\n    }\n\n    $onInit() {\n        try {\n           \n                this.parentCtrl = this.afterCtrl.parentCtrl;\n                this.isDone = false;\n               \n        }\n        catch (e) {\n                console.error(\"***SLSP*** an error occured: Rapido onInit \\n\\n\");\n                console.error(e.message);\n        }\n    }\n\n    $doCheck() {\n        try{\n            if(this.isDone)return;\n            \n            // tilesplaceholderactive is true until the tile is loaded, also by reselecting pickupinfo\n            if(this.parentCtrl.tilesplaceholderactive == true)return;\n            \n           \n            /* costs per page */\n            if (this.parentCtrl.isdigitaloffer === true){\n\n                this.$timeout(() => {\n                    let rapidoCosts = document.querySelectorAll('div[ng-if=\"$ctrl.digitalTileVisible\"] .patron_cost.last_line');\n                    let htmlRc = `<div class=\"rapidoCosts\" translate=\"customized.rapido.digi\"></div>`;\n                    angular.element(rapidoCosts).after(this.$compile(htmlRc)(this.$scope));\n                }, 20);\n            }\n\n\n                /* reservation button */\n                if (this.parentCtrl.isdigitaloffer !== true && this.parentCtrl.bestoffer !== undefined && this.parentCtrl.bestoffer.unavailableInAllMembersPod === true && this.parentCtrl.bestoffer.unavailableResource === true) {\n                    this.$timeout(() => {\n                        let reservation = document.querySelectorAll('prm-service-physical-best-offer .get_it_btn_physical > span');\n                        let htmlR1 = `<div class=\"reservationButton\" translate=\"customized.rapido.reservation\"></div>`;\n\n                        angular.element(reservation).after(this.$compile(htmlR1)(this.$scope)).addClass('noOffer');\n                    }, 20);\n                }\n\n\n                /* reading room POD */\n                if (this.parentCtrl.isdigitaloffer !== true && this.parentCtrl.bestoffer !== undefined && this.parentCtrl.bestoffer.podId == '452167832730000041' ||\n                    this.parentCtrl.isdigitaloffer !== true && this.parentCtrl.bestoffer !== undefined && this.parentCtrl.bestoffer.podId == '452167827350000041' ||\n                    this.parentCtrl.isdigitaloffer !== true && this.parentCtrl.bestoffer !== undefined && this.parentCtrl.bestoffer.podId == '452497325370000041' ||\n                    this.parentCtrl.isdigitaloffer !== true && this.parentCtrl.bestoffer !== undefined && this.parentCtrl.bestoffer.podId == '452497929300000041' ||\n                    this.parentCtrl.isdigitaloffer !== true && this.parentCtrl.bestoffer !== undefined && this.parentCtrl.bestoffer.podId == '452084165700000041') {\n\n                this.$timeout(() => {\n                    let readingRoomPod = document.querySelectorAll('div[ng-if=\"$ctrl.physicalTileVisible\"] prm-service-physical-best-offer .keep_for span');\n                    let htmlPD = `<span class=\"reading-Room-Pod\" translate=\"customized.rapido.readingroom\"></span>`;\n\n                    angular.element(readingRoomPod).after(this.$compile(htmlPD)(this.$scope)).addClass('pod');\n                }, 20);\n            }\n\n            this.isDone = true;\n             \n            \n          }  \n         catch (e) {\n            console.error(\"***SLSP*** an error occured: Rapido doCheck \\n\\n\");\n            console.error(e.message);\n        }\n    }\n}\n\n\n\nslspRapidoDigitalOfferController.$inject = ['$scope', '$compile', '$timeout'];","   \n\n    import {slspRapidoDigitalOfferController} from './slsp-rapido-digital-offer.controller';\n   \n\n    export const slspRapidoDigitalOfferModule = angular\n        .module('slspRapidoDigitalOfferModule', [])\n            .controller('slspRapidoDigitalOfferController', slspRapidoDigitalOfferController)\n            .component('slspRapidoDigitalOfferComponent',  {\n                bindings: {afterCtrl: '<'},\n                controller: 'slspRapidoDigitalOfferController',\n                \n            })\n    ","export class bcuScopesSelectorController {\n    $onInit() {\n        setTimeout(function(){\n            function activateSearch(){\n                setTimeout(function(){\n                    document.getElementsByClassName(\"zero-margin button-confirm md-button md-primoExplore-theme\")[0].click()\n                }, 100)\n            }\n            let searchScopes = document.querySelectorAll('[id^=\"select_option_\"]');\n            for (let i in searchScopes){\n                if( typeof searchScopes[i] === 'object' && searchScopes[i] !== null) {\n                    searchScopes[i].onclick = function(){\n                        activateSearch();\n                    };\n                }\n            }\n        }, 100)\n    }\n}\n","import {bcuScopesSelectorController} from './bcu-scopes-selector.controller';\n\nexport const bcuScopesSelectorModule = angular\n    .module('bcuScopesSelectorModule', [])\n        .controller('bcuScopesSelectorController', bcuScopesSelectorController)\n        .component('bcuScopesSelector',{\n            bindings: {parentCtrl: '<'},\n            controller: 'bcuScopesSelectorController',\n\n        })\n","import {bcuScopesSelectorModule} from './bcu-scopes-selector/bcu-scopes-selector.module';\n\nexport const bcuTabsAndScopesSelectorAfterModule = angular\n    .module('bcuTabsAndScopesSelectorAfterModule', [])\n        .component('prmTabsAndScopesSelectorAfter',  {\n            template: '<bcu-scopes-selector after-ctrl=\"$ctrl\"></bcu-scopes-selector><slsp-tabs-and-scopes-selector-after parent-ctrl=\"$parent.$ctrl\"></slsp-tabs-and-scopes-selector-after>'\n        });\n\nbcuTabsAndScopesSelectorAfterModule.requires.push(bcuScopesSelectorModule.name);","export class bcuLangSwitchController {\n\n    constructor($element, $window) {\n        this.$parent = $element.parent().parent()[0];\n        \n        this.$window = $window;\n    }\n\n    $onInit() {\n        try {\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n            this.languages = [\"de\",\"fr\",\"it\",\"en\"];\n            if (!this.languages.includes(this.parentCtrl.lang)) {\n                this.changeLanguage(\"en\");\n            }\n            \n        }\n        catch (e) {\n            console.error(\"***BCUFR*** bcuLangSwitchControler $onInit\");\n            console.error(e.message);\n        }\n    };\n\n    changeLanguage(lang) {\n        \n        this.parentCtrl.changeLangService.addLangParamToUrl(lang);\n        let t = this.parentCtrl;\n        this.parentCtrl.i18nService.setLanguage(lang).then(function(){\n            t.$timeout(function(){return t.$state.go(t.$state.current,{lang:lang},{reload:!0})})\n        });\n };\n\n}\nbcuLangSwitchController.$inject = ['$element'];","/**\n* @ngdoc module\n* @name bcuLangSwitchModule\n*\n* @description\n* - Add LangSwitch to user area\n* @example\n* each view\n*\n*/\nimport {bcuLangSwitchController} from './bcu-lang-switch.controller';\n\nexport const bcuLangSwitchModule = angular\n    .module('bcuLangSwitchModule', [])\n        .controller('bcuLangSwitchController', bcuLangSwitchController)\n        .component('bcuLangSwitchComponent',  {\n            bindings: {afterCtrl: '<'},\n            controller: 'bcuLangSwitchController',\n//            template: '<button class=\"md-button md-lang-button\" ng-repeat=\"(lang, url) in $ctrl.languages\" ng-class=\"{active: $ctrl.afterCtrl.parentCtrl.lang == lang}\"><a href=\"{{url}}\">{{lang}}</a></button>'\n            template: '<button class=\"md-button md-lang-button\" ng-repeat=\"lang in $ctrl.languages\" ng-class=\"{active: $ctrl.afterCtrl.parentCtrl.lang == lang}\" ng-click=\"$ctrl.changeLanguage(lang)\">{{lang}}</button>'\n        })\n","\nexport class slspIllSigninOrderLoggedOutController {\n\n    constructor(slspIllSigninOrderLoggedOutService, $scope) {\n        this.slspIllSigninOrderLoggedOutService = slspIllSigninOrderLoggedOutService;\n        this.$scope = $scope;\n    }\n\n    $doCheck() {\n        try{\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n            this.$scope.usrNme = this.slspIllSigninOrderLoggedOutService.isGuest();\n\n            if (this.$scope.usrNme == true) {\n                let myEl = angular.element(document.querySelector('primo-explore'));\n                return myEl.addClass('logged-out')\n            }\n        \n            else {\n                let myEl = angular.element(document.querySelector('primo-explore'));\n                return myEl.removeClass('logged-out');\n            }\n        }\n        catch(e){\n            console.error(\"***SLSP*** an error occured: slspIllSigninOrderLoggedOutController\\n\\n\");\n            console.error(e.message);\n        }\n    }\n}\n\nslspIllSigninOrderLoggedOutController.$inject = ['slspIllSigninOrderLoggedOutService', '$scope'];\n        \n\n","\n\n    //--------ILL Signin Order -  if logged out ---------------------------------------\n   \n\n    import {slspIllSigninOrderLoggedOutController} from './slsp-ill-signin-order-logged-out.controller';\n    import {slspIllSigninOrderLoggedOutService} from './slsp-ill-signin-order-logged-out.service';\n\n    export const slspIllSigninOrderLoggedOutModule = angular\n        .module('slspIllSigninOrderLoggedOutModule', [])\n            .factory('slspIllSigninOrderLoggedOutService', slspIllSigninOrderLoggedOutService)\n            .controller('slspIllSigninOrderLoggedOutController', slspIllSigninOrderLoggedOutController)\n            .component('slspIllSigninOrderLoggedOutComponent',  {\n                bindings: {afterCtrl: '<'},\n                controller: 'slspIllSigninOrderLoggedOutController',\n                \n            })\n    ","\n\n    export const slspIllSigninOrderLoggedOutService = ['jwtHelper', function( jwtHelper ){\n\n        function getDecodedToken(){\n            try{\n                if (!sessionStorage){\n                    console.error(\"***SLSP*** no session storage\")\n                    return null;\n                }\n                let jwt = sessionStorage.getItem('primoExploreJwt');\n                if (!jwt){\n                    return null;\n                }\n                return jwtHelper.decodeToken(jwt);\n            }\n            catch(e){\n                console.error(\"**SLSP*** an error occured: userService.getDecodedToken:\");\n                console.error(e.message);\n            }\n        }\n  \n        function isGuest(){\n            try{\n                let decodedToken = getDecodedToken();\n                if (!decodedToken) {\n                    return null;\n                }\n                let userName= decodedToken.userGroup !== 'GUEST'? decodedToken.userName : '';\n                if (userName){\n                    return false;\n                }\n                else{\n                    return true;\n                }\n            }\n            catch(e){\n                console.error(\"***SLSP*** an error occured: userService.isGuest:\");\n                console.error(e.message);\n            }\n        }\n    \n        return {\n            isGuest: isGuest,\n            getDecodedToken: getDecodedToken\n        };\n    }]\n    ","import {bcuLangSwitchModule} from './bcu-lang-switch/bcu-lang-switch.module';\nimport {slspIllSigninOrderLoggedOutModule} from './slsp-ill-signin-order-logged-out/slsp-ill-signin-order-logged-out.module';\n\nexport const slspUserAreaExpandableAfterModule = angular\n    .module('slspUserAreaExpandableAfterModule', [])\n        .component('prmUserAreaExpandableAfter',  {\n            bindings: {parentCtrl: '<'},\n            template: `<bcu-lang-switch-component after-ctrl=\"$ctrl\"></bcu-lang-switch-component><slsp-ill-signin-order-logged-out-component after-ctrl=\"$ctrl\"></slsp-ill-signin-order-logged-out-component><slsp-user-area-expandable-after parent-ctrl=\"$parent.$ctrl\"></slsp-user-area-expandable-after>`,\n        });\n\nslspUserAreaExpandableAfterModule.requires.push(bcuLangSwitchModule.name);\nslspUserAreaExpandableAfterModule.requires.push(slspIllSigninOrderLoggedOutModule.name);","require('./js/slsp-archives-htgi.module.js')\nmodule.exports = 'slspArchivesHtgi'\n","angular\n    .module('slspArchivesHtgi', [])\n\n    // \"how to get it\" section for resources of archives MFA, TMA (CMI STAR)\n\n    .controller('ArchivesHtgiController', [function () {\n\n        this.$onInit = function () {\n            try{\n                if(!this.parentCtrl.item.pnx.display.source || this.parentCtrl.item.pnx.display.source.length === 0){\n                    return;\n                }\n                this.source = this.parentCtrl.item.pnx.display.source[0];\n                // CMI STAR sources\n                if(this.source === 'ETH_MaxFrischArchiv' || this.source === 'ETH_ThomasMannArchiv'){\n                    // hide content of htgi section\n                    let section = document.getElementById('full-view-container');\n                    section.classList.add('slsp-archives-hide');\n\n                    // get guid of CMIStar\n                    let sourceid = this.parentCtrl.item.pnx.control.originalsourceid[0];\n                    let guid = sourceid.substring(sourceid.lastIndexOf(':') + 1);\n\n                    // different sources: concat url\n                    if(this.source === 'ETH_ThomasMannArchiv'){\n                        this.url = 'http://www.online.tma.ethz.ch/home/#/content/' + guid;\n                        // only for test\n                        //this.label = 'Detailed information in Thomas Mann-Archiv Online (metadata only)';\n                    }\n                    else if (this.source === 'ETH_MaxFrischArchiv') {\n                        this.url = 'http://maxfrischarchiv-online.ethz.ch/home/#/content/' + guid;\n                        // only for test\n                        //this.label = 'Request via Max Frisch-Archiv Online';\n                    }\n                }\n            }\n            catch(e){\n                console.error(\"***SLSP*** an error occured: ArchivesHtgiController\\n\\n\");\n                console.error(e.message);\n            }\n        }\n    }])\n\n    .component('almaHtgiSvcAfter', {\n        bindings: { parentCtrl: '<' },\n        controller: 'ArchivesHtgiController',\n        template: `\n        <div class=\"slsp-archives\" ng-if=\"$ctrl.url\">\n            <md-list layout=\"column\" class=\"separate-list-items md-primoExplore-theme layout-column\" role=\"list\">\n                <md-list-item role=\"listitem\" ng-href=\"{{$ctrl.url}}\" target=\"_blank\">\n                      <span>{{('customized.archives.' + $ctrl.source + '.linktext' | translate)}}</span>\n                    <span>{{$ctrl.label}}</span>\n                    <div class=\"md-secondary\">\n                        <prm-icon icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\" class=\"layout-margin\"/>\n                    </div>\n                </md-list-item>\n            </md-list>\n            <div ng-if=\"$ctrl.source === 'ETH_ThomasMannArchiv'\" class=\"slsp-archives-additional-hint\">\n                <div>\n                    <span translate=\"customized.archives.ETH_ThomasMannArchiv.text1\">No request possible. The digitized item can be consulted in the Thomas Mann Archives reading room upon advance registration (</span>\n                    <a target=\"_blank\" rel=\"noopener\" ng-href=\"https://tma.ethz.ch/utils/kontakt.html\">\n                        <span translate=\"customized.archives.ETH_ThomasMannArchiv.linktext2\">Contact</span>\n                        <prm-icon external-link icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\"></prm-icon>\n                    </a>\n                    <span translate=\"customized.archives.ETH_ThomasMannArchiv.text2\">).</span>\n                </div>\n            </div>\n            <div ng-if=\"$ctrl.source === 'ETH_MaxFrischArchiv'\" class=\"slsp-archives-additional-hint\">\n                <div>\n                    <span translate=\"customized.archives.ETH_MaxFrischArchiv.text1\">Informationen zu Bestellung und Benutzung siehe</span>\n                    <a target=\"_blank\" rel=\"noopener\" ng-href=\"http://maxfrischarchiv-online.ethz.ch/home/#/manual\">\n                        <span translate=\"customized.archives.ETH_MaxFrischArchiv.linktext2\">Bedienungshinweise</span>\n                        <prm-icon external-link icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\"></prm-icon>\n                    </a>\n                    <span translate=\"customized.archives.ETH_MaxFrischArchiv.text2\">.</span>\n                </div>\n            </div>\n        </div><slsp-htgi-svc-after parent-ctrl=\"$parent.$ctrl\"></slsp-htgi-svc-after>\n        `\n    });\n","require('./js/slsp-archives-viewit.module.js')\nmodule.exports = 'slspArchivesViewit'\n","angular\n.module('slspArchivesViewit', [])\n\n    .component('prmSearchResultAvailabilityLineAfter', {\n        bindings: { parentCtrl: '<' },\n        controller: 'ArchivesAvailabilityLineController',\n        template:'<slsp-search-result-availability-line-after parent-ctrl=\"$parent.$ctrl\"></slsp-search-result-availability-line-after>'\n    })\n\n    .component('prmAlmaViewitAfter', {\n        bindings: { parentCtrl: '<' },\n        controller: 'ArchivesViewitController',\n        template: `\n        <div class=\"slsp-archives\" ng-if=\"$ctrl.url\">\n            <md-list layout=\"column\" class=\"separate-list-items md-primoExplore-theme layout-column\" role=\"list\">\n                <md-list-item role=\"listitem\" ng-href=\"{{$ctrl.url}}\" target=\"_blank\">\n                    <span>{{('customized.archives.' + $ctrl.source + '.linktext' | translate)}}</span>\n                    <span>{{$ctrl.label}}</span>\n                    <div class=\"md-secondary\">\n                        <prm-icon icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\" class=\"layout-margin\"/>\n                    </div>\n                </md-list-item>\n            </md-list>\n            <div ng-if=\"$ctrl.source === 'ETH_Hochschularchiv'\" class=\"slsp-archives-additional-hint\">\n                <div>\n                    <span translate=\"customized.archives.ETH_Hochschularchiv.text1\">Informationen zu Bestellung und Benutzung siehe</span>\n                    <a target=\"_blank\" rel=\"noopener\" ng-href=\"http://archivdatenbank-online.ethz.ch/hsa/#/manual\">\n                        <span translate=\"customized.archives.ETH_Hochschularchiv.linktext2\">Bedienungshinweise</span>\n                        <prm-icon external-link icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\"></prm-icon>\n                    </a>\n                    <span translate=\"customized.archives.ETH_Hochschularchiv.text2\">.</span>\n                </div>\n            </div>\n        </div><slsp-alma-viewit-after parent-ctrl=\"$parent.$ctrl\"></slsp-alma-viewit-after>\n        `\n        })\n\n    // viewit section for archives when there are only partial digitized items, e.g. \"ETH Hochschularchiv\" (CMI STAR)\n    .controller('ArchivesViewitController', ['$translate', function ($translate) {\n        this.$onInit = function () {\n            try{\n                if(!this.parentCtrl.item.pnx.display.source || this.parentCtrl.item.pnx.display.source.length === 0){\n                    return;\n                }\n                this.source = this.parentCtrl.item.pnx.display.source[0];\n                // CMI STAR sources\n                if(this.source === 'ETH_Hochschularchiv'){\n                    if(this.parentCtrl.item.delivery.GetIt1 && this.parentCtrl.item.delivery.GetIt1.length > 0 && this.parentCtrl.item.delivery.GetIt1[0].links && this.parentCtrl.item.delivery.GetIt1[0].links.length > 0){\n\n                        // there is an online resource: return and do nothing\n                        let aOnlineLink = this.parentCtrl.item.delivery.GetIt1[0].links.filter( l => {\n                            if(l.isLinktoOnline && l.link !== ''){\n                                return true;\n                            }\n                            return false;\n                        });\n                        if (aOnlineLink.length > 0) {\n                            return;\n                        }\n\n                        // there is no online resource\n                        // change section heading\n                        $translate('nui.getit.service_howtogetit').then((translation) => {\n                            let fullView = document.getElementById('fullView');\n                            angular.element(fullView.querySelector(\"h4[translate='nui.getit.service_viewit']\")).text(translation);\n                            angular.element(fullView.querySelector(\"#services-index span[translate='nui.getit.service_viewit']\")).text(translation);\n                        });\n\n                    }\n                    // hide content of viewit section\n                    let section = document.getElementById('full-view-container');\n                    section.classList.add('slsp-archives-hide');\n\n                    // get guid of CMIStar\n                    let sourceid = this.parentCtrl.item.pnx.control.originalsourceid[0];\n                    let guid = sourceid.substring(sourceid.lastIndexOf(':') + 1);\n\n                    // different sources: concat url\n                    if(this.source === 'ETH_Hochschularchiv'){\n                        this.url = 'http://archivdatenbank-online.ethz.ch/hsa/#/content/' + guid;\n                        // only for test\n                        //this.label = 'Bestellen über Hochschularchiv Online';\n                    }\n                }\n            }\n            catch(e){\n                console.error(\"***SLSP*** an error occured: ArchivesViewitController\\n\\n\");\n                console.error(e.message);\n            }\n        }\n    }])\n\n    // change availability line, if there is no digitization\n    .controller('ArchivesAvailabilityLineController', ['$translate', function ($translate) {\n        this.$onInit = function () {\n            try{\n                this.changeButton = false;\n                if(!this.parentCtrl.result.pnx.display.source || this.parentCtrl.result.pnx.display.source.length === 0){\n                    return;\n                }\n                this.source = this.parentCtrl.result.pnx.display.source[0];\n                if(!(this.source === 'ETH_Hochschularchiv'))return;\n                if(!this.parentCtrl.result.delivery.GetIt1 || this.parentCtrl.result.delivery.GetIt1.length == 0 || !this.parentCtrl.result.delivery.GetIt1[0].links || this.parentCtrl.result.delivery.GetIt1[0].links.length == 0)return;\n\n                let aOnlineLink = this.parentCtrl.result.delivery.GetIt1[0].links.filter( l => {\n                    if(l.isLinktoOnline && l.link !== ''){\n                        return true;\n                    }\n                    return false;\n                });\n                if (aOnlineLink.length === 0) {\n                    // there is no online resource\n                    $translate('delivery.code.no_inventory').then((translation) => {\n                        this.changeButton = true;\n                        this.changeButtonText = translation;\n                    });\n                    let availabilityLine = this.parentCtrl.$element[0];\n                    if(availabilityLine) {\n                        availabilityLine.classList.add('slsp-hsa-no-online');\n                    }\n                }\n            }\n            catch(e){\n                console.error(\"***SLSP*** an error occured: ArchivesAvailabilityLineController\\n\\n\");\n                console.error(e.message);\n            }\n        }\n\n        this.$doCheck = function () {\n            try{\n                if (this.changeButton){\n                    let availabilityLine = this.parentCtrl.$element[0];\n                    let button = availabilityLine.querySelector('.availability-status');\n                    if(angular.element(button) && angular.element(button).length > 0){\n                        angular.element(button).html(this.changeButtonText);\n                        this.changeButton = false;\n                        this.changeButtonText = '';\n                    }\n                }\n            }\n            catch(e){\n                console.error(\"***ETH*** an error occured: ArchivesAvailabilityLineController $doCheck\\n\\n\");\n                console.error(e.message);\n            }\n        }\n    }])\n","require('./js/slsp-http-intercept-pickup-information.module.js')\nmodule.exports = 'slspHttpInterceptPickupInformation'","export const slspHttpInterceptPickupInformation = angular.module('slspHttpInterceptPickupInformation', ['ng'])\n    .config(['$httpProvider', ($httpProvider) => {\n        $httpProvider.interceptors.push(['$q', ($q) => {\n            return {\n                'request': (request) => {\n                    return request\n                },\n                'requestError': (request) => {\n                    return $q.reject(request)\n                },\n                'responseError': (response) => {\n                    return $q.reject(response)\n                },\n                'response': (response) => {\n                    try {                        \n                        if (/primaws\\/rest\\/pub\\/ngrs\\/ngrsPickupInformationUrl/.test(response.config.url)) {                            \n                            //get userGroup from JWT \n                            let userGroup = angular.element(document.querySelector('primo-explore')).controller('primo-explore').userSessionManagerService.jwtUtilService.getDecodedToken().userGroup;\n\n                            //list of user groups to change delivery for\n                            if (['91','92'].includes(userGroup)) {\n                                response.data.personalDelivery = 'None';\n                            }\n                        }\n                    } catch (error) {\n                        console.log(error)\n                    }\n                    return response\n                }\n            }\n        }])\n    }])\n","require('./js/slsp-http-intercept-requests.module.js')\nmodule.exports = 'slspHttpInterceptRequests'","export const slspHttpInterceptRequests = angular.module('slspHttpInterceptRequests', ['ng'])\n    .config(['$httpProvider', ($httpProvider) => {\n        $httpProvider.interceptors.push(['$q', ($q) => {\n            return {\n                'request': (request) => {\n                    return request\n                },\n                'requestError': (request) => {\n                    return $q.reject(request)\n                },\n                'responseError': (response) => {\n                    return $q.reject(response)\n                },\n                'response': (response) => {\n                    try {\n                        if (/primaws\\/rest\\/priv\\/myaccount\\/requests/.test(response.config.url)) {\n                            if (response.status == 200 && response.data.status == \"ok\") {\n                                let interfaceLanguage = angular.element(document.querySelector('primo-explore')).injector().get('$rootScope').$$childHead.$ctrl.userSessionManagerService.getUserLanguage() ||\n                                    window.appConfig['primo-view']['attributes-map'].interfaceLanguage\n\n                                let list_of_hold_states = {\n                                    'en': [\"in transit\", \"in process\", \"on hold shelf\"],\n                                    'de': [\"transfer\", \"in bearbeitung\", \"bereitgestellt\"],\n                                    'fr': [\"en cours de transfert\", \"en cours\", \"sur le rayon des réservations\"],\n                                    'it': [\"in transito\", \"in processo\", \"scaffale prenotazioni\"]\n                                }\n                                let list_of_photocopy_states = {\n                                    'en': [\"in transit\", \"in process\"],\n                                    'de': [\"transfer\", \"in bearbeitung\"],\n                                    'fr': [\"en cours de transfert\", \"en cours\"],\n                                    'it': [\"in transito\", \"in processo\"]\n                                }\n                                if (Object.keys(list_of_hold_states).includes(interfaceLanguage)) {\n                                    let list_of_hold_states_regexp = RegExp(list_of_hold_states[interfaceLanguage].map(m => m.toLowerCase()).join('|'))\n                                    // rewrite cancellable holds\n                                    response.data.data.holds.hold.map((m) => {\n                                        if (list_of_hold_states_regexp.test(m.holdstatus.toLowerCase())) {\n                                            m.cancel = 'N'\n                                        }\n                                    })\n                                }\n                                else {\n                                    throw `No mapping found for holds: ${interfaceLanguage}`\n                                }\n\n                                if (Object.keys(list_of_photocopy_states).includes(interfaceLanguage)) {\n                                    let list_of_photocopy_states_regexp = RegExp(list_of_photocopy_states[interfaceLanguage].map(m => m.toLowerCase()).join('|'))\n                                    // rewrite cancellable photocopies\n                                    response.data.data.photocopies.photocopy.map((m) => {\n                                        if (list_of_photocopy_states_regexp.test(m.requeststatus.toLowerCase())) {\n                                            m.cancel = 'N'\n                                        }\n                                    })\n                                }\n                                else {\n                                    throw `No mapping found for photocopies: ${interfaceLanguage}`\n                                }\n                            }\n                        }\n                    }\n                    catch (error) {\n                        console.error(error);\n                    }\n                    return response;\n                }\n            }\n        }])\n    }])\n","require('./js/slsp-ill-signin-order-alert.module.js')\nmodule.exports = 'slspIllSigninOrderAlert'","//--------ILL Signin Order -  if Alert Message ---------------------------------------\n\nangular\n    .module('slspIllSigninOrderAlert', [])\n\n    .controller('AlertMsgController', ['$scope', function ($scope) {\n        var vm = this;\n        vm.getAlert = getAlert\n\n        function getAlert() {\n            var ga = vm.parentCtrl.almaHowToGetitService.reqAlert._htmlMsg;\n            var myEl2 = angular.element(document.querySelector('primo-explore'));\n\n            if (ga.length > 0) {\n                return myEl2.addClass('alert');\n\n            }\n            else {\n\n                return myEl2.removeClass('alert');\n\n            }\n        }\n\n    }])\n\n    .component('almaHowovpAfter', {\n        bindings: { parentCtrl: '<' },\n        controller: 'AlertMsgController',\n        template: '<div style=\"display:none\">{{$ctrl.getAlert()}}</div><slsp-howovp-after parent-ctrl=\"$parent.$ctrl\"></slsp-howovp-after>'\n    });\n","export const unigeBibNewsConfig = function(){\n    return {\n        label: {\n            heading: {\n                de: 'Aktuelles',\n                en: 'Library News',\n                fr: 'Actus de la Bibliothèque UNIGE',\n                it: 'Notizie dalla biblioteca'\n            },\n            more:{\n                de: 'Weitere Informationen',\n                en: 'More information',\n                fr: 'Voir plus',\n                it: 'Più informazioni'\n            },\n            all:{\n                de: 'Alle Meldungen ansehen',\n                en: 'All news',\n                fr: 'Toutes les actualités',\n                it: 'Tutte le notizie'\n            }\n        }\n    }\n}\n","export class unigeBibNewsController {\n\n    constructor( $sce, unigeConfigService, unigeBibNewsConfig, unigeBibNewsService ) {\n        this.$sce = $sce;\n        this.unigeConfigService = unigeConfigService;\n        this.config = unigeBibNewsConfig;\n        this.unigeBibNewsService = unigeBibNewsService;\n        this.lang = this.unigeConfigService.getLanguage();\n    }\n\n    $onInit() {\n        try{\n            this.unigeBibNewsService.getNews(this.lang)\n                .then((data) => {\n                    try{\n                        this.allNewsUrl = 'https://www.unige.ch/biblio/fr/actus/';\n                        this.news = data.entries;\n                    }\n                    catch(e){\n                        console.error(\"***UNIGE*** an error occured: unigeBibNewsController unigeBibNewsService.getNews(): \\n\\n\");\n                        console.error(e.message);\n                    }\n                });\n        }\n        catch(e){\n            console.error(\"***UNIGE*** an error occured: unigeBibNewsController.onInit()\\n\\n\");\n            console.error(e.message);\n        }\n    }\n    decodeHtmlEntities(text) {\n        var div = document.createElement('div');\n        div.innerHTML = text;\n        return this.$sce.trustAsHtml(div.textContent);\n \t\t//return  text ? String(text).replace(/&nbsp;/gm, ' ') : '';\n    };\n}\n\nunigeBibNewsController.$inject = ['$sce', 'unigeConfigService', 'unigeBibNewsConfig', 'unigeBibNewsService' ];\n","/**\n* @ngdoc service\n* @name unigeBibNewsService\n*\n* @description\n* Service to get UNIGE Library News\n*\n*\n* <b>Used by</b><br>\n** Module {@link UNIGE.unigeBibNewsModule}<br>\n*\n*\n */\n\nexport const unigeBibNewsService = ['$http', '$sce', function($http, $sce){\n\n    function getNews(lang){\n        if(!lang){\n            lang = 'en';\n        }\n        if(lang == 'fr' || lang == 'it'){\n            lang = 'en';\n        }\n\n        let url = 'https://dis.unige.ch/slsp/unige_bib_news.php';\n        $sce.trustAsResourceUrl(url);\n\n        return $http.get(url,{headers:{ \"X-From-ExL-API-Gateway\": undefined }})\n            .then(\n                function(response){\n                    console.log('lang = ' + lang);\n                    return response.data;\n                },\n                function(httpError){\n                    let error = \"***UNIGE*** an error occured: unigeBibNewsService.get(): \" + httpError.status;\n                    if (httpError.data && httpError.data.errorMessage) {\n                        error += ' - ' + httpError.data.errorMessage;\n                        \n                    }\n                    console.error(error);\n                    return null;\n                }\n            );\n    }\n\n\n    return {\n        getNews: getNews\n    };\n}];\n","/**\n* @ngdoc service\n* @key unigeConfigService\n*\n* @description\n*\n* Service to get and handle informations from a module config:\n* - getLabel()\n* - getUrl()\n* - getLanguage()\n*\n */\nexport const unigeConfigService = ['$rootScope', function( $rootScope ){\n\n    function getLanguage(){\n        try{\n            let sms = $rootScope.$$childHead.$ctrl.userSessionManagerService;\n            if (!sms) {\n                console.error(\"***UNIGE*** unigeConfigService: userSessionManagerService not available\");\n                return 'en';\n            }\n            else{\n                return sms.getUserLanguage() || $window.appConfig['primo-view']['attributes-map'].interfaceLanguage;\n            }\n        }\n        catch(e){\n            console.error(\"***UNIGE*** an error occured: unigeConfigService.getLanguage():\");\n            console.error(e.message);\n            return 'en';\n        }\n    }\n\n\n    function getLabel(config, key) {\n        try{\n            let lang = this.getLanguage();\n            if (!config.label[key]) {\n                console.error(\"***UNIGE*** unigeConfigService.getLabel: '\" + key + \"' not in config\");\n                return key;\n            }\n            if(config.label[key][lang]){\n                return config.label[key][lang];\n            }\n            else{\n                return config.label[key]['en'];\n            }\n        }\n        catch(e){\n            console.error(\"***UNIGE*** an error occured: unigeConfigService.getLabel():\");\n            console.error(e.message);\n            return '';\n        }\n    }\n\n    function getUrl(config, key) {\n        try{\n            let lang = this.getLanguage();\n            if (!config.url[key]) {\n                console.error(\"***UNIGE*** unigeConfigService.getUrl: '\" + key + \"' not in config\");\n                return '';\n            }\n            if(config.url[key][lang]){\n                return config.url[key][lang];\n            }\n            else{\n                return config.url[key]['en'];\n            }\n        }\n        catch(e){\n            console.error(\"***UNIGE*** an error occured: unigeConfigService.getUrl():\");\n            console.error(e.message);\n            return '';\n        }\n    }\n\n    return {\n        getLanguage: getLanguage,\n        getLabel: getLabel,\n        getUrl: getUrl\n    };\n}]\n","import {unigeConfigService} from './module/unige-config.service';\nimport {unigeBibNewsConfig} from './module/unige-bib-news.config';\nimport {unigeBibNewsController} from './module/unige-bib-news.controller';\nimport {unigeBibNewsHtml} from './module/unige-bib-news.html';\nimport {unigeBibNewsService} from './module/unige-bib-news.service';\n\nexport const unigeBibNewsModule = angular\n    .module('unigeBibNewsModule', [])\n        .factory('unigeConfigService', unigeConfigService)\n        .factory('unigeBibNewsConfig', unigeBibNewsConfig)\n        .factory('unigeBibNewsService', unigeBibNewsService)\n        .controller('unigeBibNewsController', unigeBibNewsController)\n        .component('unigeBibNewsComponent',{\n            bindings: {afterCtrl: '<'},\n            controller: 'unigeBibNewsController',\n            template: unigeBibNewsHtml\n        })\n\nunigeBibNewsModule.requires.push(unigeBibNewsModule.name);\n","import './primo-explore-eth-metagrid';\n\nvar app = angular.module('viewCustom', ['ethMetagridModule']);\n\napp.component('prmServiceDetailsAfter',  {\n        bindings: {parentCtrl: '<'},\n        template: `<eth-metagrid-component after-ctrl=\"$ctrl\"></eth-metagrid-component>`\n    })\n","export const ethMetagridConfig = function(){\n    return {\n        // whitelist of providers whose links should be displayed.\n        // The array contains the slug of the provider.\n        // https://api.metagrid.ch/providers.json\n        // if you add a slug, you have also to add the labels (providers.json: 'short_description').\n        whitelist:\n            [\"hallernet\", \"fotostiftung\", \"sikart\",\"elites-suisses-au-xxe-siecle\",\"bsg\", \"dodis\", \"helveticat\", \"hls-dhs-dss\",\"histoirerurale\",\"lonsea\",\"ssrq\",\"alfred-escher\",\"geschichtedersozialensicherheit\"],\n        label: {\n            'hallernet': {\n                de: 'Editions- und Forschungsplattform hallerNet',\n                en: 'Editions- und Forschungsplattform hallerNet',\n                fr: 'Editions- und Forschungsplattform hallerNet',\n                it: 'Editions- und Forschungsplattform hallerNet'\n            },\n            'fotostiftung': {\n                de: 'Fotostiftung Schweiz',\n                en: 'Fotostiftung Schweiz',\n                fr: 'Fotostiftung Schweiz',\n                it: 'Fotostiftung Schweiz'\n            },\n            'sikart': {\n                de: 'SIKART',\n                en: 'SIKART',\n                fr: 'SIKART',\n                it: 'SIKART'\n            },\n            'elites-suisses-au-xxe-siecle': {\n                de: 'Schweizerische Eliten im 20. Jahrhundert',\n                en: 'Swiss elites database',\n                fr: 'Elites suisses au XXe siècle',\n                it: 'Elites suisses au XXe siècle'\n            },\n            'bsg': {\n                de: 'Bibliographie der Schweizergeschichte',\n                en: 'Bibliography on Swiss History',\n                fr: 'Bibliographie de l\\'histoire suisse',\n                it: 'Bibliografia della storia svizzera'\n\n            },\n            'dodis': {\n                de: 'Diplomatische Dokumente der Schweiz',\n                en: 'Diplomatic Documents of Switzerland',\n                fr: 'Documents diplomatiques suisses',\n                it: 'Documenti diplomatici svizzeri'\n            },\n            'helveticat': {\n                de: 'Helveticat',\n                en: 'Helveticat',\n                fr: 'Helveticat',\n                it: 'Helveticat'\n            },\n            'hls-dhs-dss': {\n                de: 'Historisches Lexikon der Schweiz',\n                en: 'Historical Dictionary of Switzerland',\n                fr: 'Dictionnaire historique de la Suisse',\n                it: 'Dizionario storico della Svizzera'\n            },\n            'histoirerurale': {\n                de: 'Archiv für Agrargeschichte',\n                en: 'Archives of rural history',\n                fr: 'Archives de l\\'histoire rurale',\n                it: 'Archivio della storia rurale'\n            },\n            'lonsea': {\n                de: 'Lonsea',\n                en: 'Lonsea',\n                fr: 'Lonsea',\n                it: 'Lonsea'\n            },\n            'ssrq': {\n                de: 'Sammlung Schweizerischer Rechtsquellen',\n                en: 'Collection of Swiss Law Sources',\n                fr: 'Collection des sources du droit suisse',\n                it: 'Collana Fonti del diritto svizzero'\n            },\n            'alfred-escher': {\n                de: 'Alfred Escher-Briefedition',\n                en: 'Alfred Escher letters edition',\n                fr: 'Edition des lettres Alfred Escher',\n                it: 'Edizione lettere Alfred Escher'\n            },\n            'geschichtedersozialensicherheit': {\n                de: 'Geschichte der sozialen Sicherheit',\n                en: 'Geschichte der sozialen Sicherheit',\n                fr: 'Histoire de la sécurité sociale',\n                it: 'Storia della sicurezza sociale'\n            }\n        }\n    }\n}\n","// Modified ETH Metagrid lookup module\n// Added support for IdRef in addition to GND\n// T. Guignard for UNIGE - April 2023\n\nexport class ethMetagridController {\n\n    constructor( ethConfigService, ethMetagridConfig, ethMetagridService ) {\n        this.ethConfigService = ethConfigService;\n        this.config = ethMetagridConfig;\n        this.ethMetagridService = ethMetagridService;\n    }\n    \n    buildMetalinkLinks(provider,id){\n        this.ethMetagridService.getConcordances(provider, id)\n        .then((data) => {\n            try{\n                if (!data)return;\n                if (!data.concordances || data.concordances.length === 0 || !data.concordances[0].resources || data.concordances[0].resources.length === 0)return;\n                \n                // Use Metagrid unique identifiers to avoid duplicates\n                let metagridId = data.concordances[0].id;\n                if (this.persons.find(x => x.id == metagridId))return;          \n                \n                let person = {};\n                person.id = metagridId;\n                let resources = data.concordances[0].resources;\n                let whitelistedMetagridLinks = [];\n                let whitelistedMetagridLinksSorted = [];\n\n                person.name = resources[0].metadata.last_name;\n                if(resources[0].metadata.first_name){\n                    person.name += ', ' + resources[0].metadata.first_name;\n                }\n\n                for(var j = 0; j < resources.length; j++){\n                    let resource = resources[j];\n                    let slug = resource.provider.slug;\n                    let url = resource.link.uri;\n\n                    // check whitelist for Metagrid links\n                    if (this.config.whitelist.indexOf(slug) === -1) {\n                        continue;\n                    }\n\n                    let label = this.ethConfigService.getLabel(this.config, slug);\n                    whitelistedMetagridLinks.push({'slug': slug,'url': url, 'label': label});\n                }\n                // Dodis and HLS first\n                let dodis = whitelistedMetagridLinks.filter(e => {\n                    return e.slug === 'dodis';\n                });\n                whitelistedMetagridLinksSorted = whitelistedMetagridLinksSorted.concat(dodis);\n                let hls = whitelistedMetagridLinks.filter(e => {\n                    return e.slug === 'hls-dhs-dss';\n                });\n                whitelistedMetagridLinksSorted = whitelistedMetagridLinksSorted.concat(hls);\n                let rest = whitelistedMetagridLinks.filter(e => {\n                    return e.slug !== 'hls-dhs-dss' && e.slug !== 'dodis';\n                });\n                whitelistedMetagridLinksSorted = whitelistedMetagridLinksSorted.concat(rest);\n\n                person.metagridLinks = whitelistedMetagridLinksSorted;\n                this.persons.push(person);\n            }\n            catch(e){\n                console.error(\"an error occured: ethMetagridController: ethMetagridService.getConcordances callback:\\n\\n\");\n                console.error(e.message);\n            }\n        })\n    }\n\n    $onInit() {\n        try{\n            this.parentCtrl = this.afterCtrl.parentCtrl;\n\n            // this.persons = collection for all persons having a GND or IdRef ID\n            this.persons = [];\n\n            // Only run the rest of the code once the local fields have been loaded\n            if(!this.parentCtrl.item.pnx.display.lds03 && !this.parentCtrl.item.pnx.display.lds90)return;\n            \n            // array of all GND IDs\n            let gndIds = [];\n            \n            // array of all IdRef IDs\n            let idrefIds = [];\n            \n            if(angular.isDefined(this.parentCtrl.item.pnx.display.lds03)){\n                \n                // Look up any GND IDs found (in local field lds03)\n                let lds03 = this.parentCtrl.item.pnx.display.lds03;\n            \n                for(let i = 0; i < lds03.length; i++){\n                    // ALMA Ressources: link in value\n                    if(lds03[i].indexOf('/gnd/') > -1){\n                        let part = lds03[i].substring(lds03[i].indexOf('/gnd/') + 5);\n                        part = part.substring(0, part.indexOf('\">'));\n                        if(part.indexOf('(DE-588)')>-1){\n                            part = part.replace('(DE-588)','')\n                        }\n                        if(gndIds.indexOf(part)===-1)gndIds.push(part);\n                    }\n                    // External data: text in value\n                    else if (lds03[i].indexOf(': ') > -1) {\n                        let part = lds03[i].substring(lds03[i].indexOf(': ') + 2);\n                        if(part.indexOf('(DE-588)')>-1){\n                            part = part.replace('(DE-588)','')\n                        }\n                        if(gndIds.indexOf(part)===-1)gndIds.push(part);\n                    }\n                }\n                //console.log('Authorités GND:')\n                //console.log(gndIds);\n            }\n            \n            \n            if(this.parentCtrl.item.pnx.display.lds90){\n                \n                // Look up any IdRef IDs found (in local field lds90)\n                let lds90 = this.parentCtrl.item.pnx.display.lds90;\n            \n                for(let i = 0; i < lds90.length; i++){\n                    // Catch IdRef links provided as URLs\n                    if(lds90[i].indexOf('idref.fr/') > -1){\n                        let part = lds90[i].substring(lds90[i].indexOf('idref.fr/') + 9);\n                        part = part.substring(0, part.indexOf('\">'));\n                        // Remove any (IdRef) prefix\n                        if(part.indexOf('(IdRef)')>-1){\n                            part = part.replace('(IdRef)','')\n                        }\n                        if(idrefIds.indexOf(part)===-1)idrefIds.push(part);\n                    }\n                    // Catch identifiers provided with (IdRef) prefix\n                    else if (lds90[i].indexOf(': ') > -1) {\n                        let part = lds90[i].substring(lds90[i].indexOf(': ') + 2);\n                        if(part.indexOf('(IdRef)')>-1){\n                            part = part.replace('(IdRef)','')\n                        }\n                        if(idrefIds.indexOf(part)===-1)idrefIds.push(part);\n                    }\n                }\n                //console.log('Authorités IdRef:')\n                //console.log(idrefIds);\n            }\n            \n \n                for(var i = 0; i < gndIds.length; i++){\n                    let gndId = gndIds[i];\n                    if (gndId === \"\")continue;\n                    if (gndId.indexOf(')')>-1) {\n                        gndId = gndId.substring(gndId.lastIndexOf(')')+1);\n                    }\n                \n                    this.buildMetalinkLinks('gnd', gndId);\n                }\n            \n                for(var i = 0; i < idrefIds.length; i++){\n                    let idrefId = idrefIds[i];\n                    if (idrefId === \"\")continue;\n                    if (idrefId.indexOf(')')>-1) {\n                        idrefId = idrefId.substring(idrefId.lastIndexOf(')')+1);\n                    }\n                \n                    this.buildMetalinkLinks('sudoc', idrefId);\n                }\n            \n        }\n        catch(e){\n            console.error(\"***ETH*** an error occured: ethMetagridController.onInit()\\n\\n\");\n            console.error(e.message);\n            throw(e);\n        }\n    }\n}\n\nethMetagridController.$inject = ['ethConfigService', 'ethMetagridConfig', 'ethMetagridService'];\n","/**\n* @ngdoc module\n* @name ethMetagridModule\n*\n* @description\n*\n* - checks beacon.findbuch, Metagrid, Entityfacts (DNB), Wikidata for person informations (by GND ID)\n*\n* <b>AngularJS Dependencies</b><br>\n* Service /services {@link ETH.ethConfigService}<br>\n*\n*\n* <b>CSS/Image Dependencies</b><br>\n* CSS /css/eth-metagrid.css\n*\n*\n*/\nimport {ethConfigService} from './services/eth-config.service';\nimport {ethMetagridConfig} from './eth-metagrid.config';\nimport {ethMetagridService} from './eth-metagrid.service';\nimport {ethMetagridHtml} from './eth-metagrid.html';\nimport {ethMetagridController} from './eth-metagrid.controller';\n\n\nexport const ethMetagridModule = angular\n    .module('ethMetagridModule', [])\n        .factory('ethConfigService', ethConfigService)\n        .factory('ethMetagridConfig', ethMetagridConfig)\n        .factory('ethMetagridService', ethMetagridService)\n        .controller('ethMetagridController', ethMetagridController)\n        .component('ethMetagridComponent',{\n            bindings: {afterCtrl: '<'},\n            controller: 'ethMetagridController',\n            template: ethMetagridHtml\n        })\n","export const ethMetagridService = ['$http', '$sce', function($http, $sce){\n\n    let baseurl = 'https://api.metagrid.ch/search?group=1&skip=0&take=50';\n\n    function getConcordances(metagridService,metagridId){\n        let url = baseurl + '&provider=' + metagridService + '&query=' + metagridId;\n        $sce.trustAsResourceUrl(url);\n\n        return $http.get(url)\n            .then(\n                function(response){\n                    return response.data;\n                },\n                function(httpError){\n                    if (httpError.status === 404)return null;\n                    let error = \"an error occured: ethMetagridService callback: \" + httpError.status;\n                    if (httpError.data && httpError.data.errorMessage) {\n                        error += ' - ' + httpError.data.errorMessage;\n                    }\n                    console.error(error);\n                    return null;\n                }\n            );\n    }\n    return {\n        getConcordances: getConcordances\n    };\n}]\n","require('./js/unige-ill-open-url.module.js')\nmodule.exports = 'unigeIllOpenUrl'","angular\n    .module('unigeIllOpenUrl', [])\n    .controller('unigeIllOpenUrlController', ['$scope', '$location', function ($scope,$location) {\n        var vm = this;\n        this.$onInit = function() {\n            \n            // For blankIll page only\n            if ($location.path().toLowerCase() == '/blankill') {\n                // Store OpenURL parameters in this controller\n                vm.search = $location.search();\n                \n                // Proceed only when the request service contains the form fields\n                var request_service = vm.parentCtrl.requestService;\n                $scope.$watch(\n                    function () {\n                        if (angular.isDefined(request_service.formFields)) {\n                        return request_service.formFields.length;\n                      }\n                      return 0;\n                    },\n                    function (newValue, oldValue) {\n                      if (newValue > 0) {\n                        var fields = request_service.formFields;\n                        // Print all form fields in the console for Thomas to work through\n                        console.log(fields);\n                        // Print URL parameters in the console for Thomas to compare to\n                        console.log(vm.search);\n                        // Map field keys to OpenURL parameters\n                        const param_map = {\n                            'title': 'rft.title',\n                            'articleTitle': 'rft.atitle',\n                            'journalTitle': 'rft.jtitle',\n                            'title' : 'rft.btitle',\n                            'author': 'rft.au',\n                            'publisher': 'rft.publisher',\n                            'publicationDate': 'rft.pubdate',\n                            'issn' : 'rft.issn',\n                            'isbn' : 'rft.isbn',\n                            'doi' : 'rft.doi',\n                            'startPage' : 'rft.spage',\n                            'endPage' : 'rft.epage',\n                            'edition' : 'rft.edition',\n                            'volume' : 'rft.volume',\n                            'issue' : 'rft.issue',\n                            'pmid' : 'rft.pmid'\n                        }\n                        \n                        // Switch form type if the reference is for a journal article or a book chapter\n                        if (angular.isDefined(vm.search['rft.genre']) && \n                           (vm.search['rft.genre'] == 'article' || (vm.search['rft.genre'] == 'book' && vm.search['rft.atitle'] != '')) ){\n                            request_service.formData['citationType'] = 'CR';\n                            request_service.formFields[2].events.onClick();\n                        }\n                        \n                        // Set each field value in formData\n                        console.log(request_service.formData);\n                        var openurl_param;\n                        angular.forEach(fields, function(field) {\n                          if (angular.isDefined(param_map[field.key])) {\n                            openurl_param = param_map[field.key];\n                            request_service.formData[field.name] = vm.search[openurl_param];\n                          }\n                        });\n                        \n                        // Deal with special cases\n                        \n                        // Use rft.date if rft.pubdate is empty\n                        if (angular.isDefined(vm.search['rft.date']) && vm.search['rft.date'] != '' && request_service.formData['publicationDate'] == '') {\n                            request_service.formData['publicationDate'] = vm.search['rft.date'];\n                        }\n                        \n                        // Build page range from start and end page\n                        var pages_range = vm.search['rft.spage'];\n                        if (angular.isDefined(vm.search['rft.epage']) && vm.search['rft.epage'] != '') {\n                            pages_range = pages_range + '-' + vm.search['rft.epage'];\n                        }\n                        request_service.formData['pagesToPhotocopy'] = pages_range;\n                        \n                        // Set journal volume if the reference is of type article\n                        if (vm.search['rft.genre'] == 'article'){\n                            request_service.formData['journalVolume'] = vm.search['rft.volume'];\n                        }\n                        \n                        // If rft.au is empty, try building author field from rft.aufirst and rft.aulast\n                        if (!angular.isDefined(vm.search['rft.au']) || vm.search['rft.au'] == '') {\n                            var author = '';\n                            if (angular.isDefined(vm.search['rft.aulast']) && vm.search['rft.aulast'] != '') {\n                                author = vm.search['rft.aulast'];\n                            }\n                            if (angular.isDefined(vm.search['rft.aufirst']) && vm.search['rft.aufirst'] != '') {\n                                author = author + ', ' + vm.search['rft.aufirst'];\n                            }\n                            else if (angular.isDefined(vm.search['rft.auinit']) && vm.search['rft.auinit'] != '') {\n                                author = author + ', ' + vm.search['rft.auinit'];\n                            }\n                            if (author != '') {\n                                request_service.formData['author'] = author;\n                            }\n                        }\n                        \n                        // If it is a book or journal issue add additional details to the comment field\n                        if (angular.isDefined(vm.search['rft.genre']) && (vm.search['rft.genre'] == 'book' || vm.search['rft.genre'] == 'journal') ){\n                            var comment = '';\n                            if (angular.isDefined(vm.search['rft.volume']) && vm.search['rft.volume'] != '') {\n                                comment = 'Vol: ' + vm.search['rft.volume'];\n                            }\n                            if (angular.isDefined(vm.search['rft.issue']) && vm.search['rft.issue'] != '') {\n                                comment = comment + ' N°: ' + vm.search['rft.issue'];\n                            }\n                            if (angular.isDefined(vm.search['rft.part']) && vm.search['rft.part'] != '') {\n                                comment = comment + ' Part: ' + vm.search['rft.part'];\n                            }\n                            if (angular.isDefined(vm.search['rft.doi']) && vm.search['rft.doi'] != '') {\n                                comment = comment + ' DOI: ' + vm.search['rft.doi'];\n                            }\n                            if (comment != '') {\n                                request_service.formData['comment'] = comment;\n                            }\n                        }\n                        \n                        // Add place to publisher field if present\n                        if (angular.isDefined(vm.search['rft.place']) && vm.search['rft.place'] != '' &&\n                            angular.isDefined(vm.search['rft.publisher']) && vm.search['rft.publisher'] != '') {\n                                request_service.formData['publisher'] = vm.search['rft.place'] + ': ' + vm.search['rft.publisher'];\n                        }\n                        \n                        // If the reference is for a whole journal issue, tweak fields to be able to pass on the required information.\n                        if (angular.isDefined(vm.search['rft.genre']) && vm.search['rft.genre'] == 'journal'){\n                            if (angular.isDefined(vm.search['rft.jtitle']) && vm.search['rft.jtitle'] != ''){\n                                request_service.formData['title'] = vm.search['rft.jtitle'];\n                            }\n                            // For whole isues, it's OK if no author is provided\n                            if (request_service.formData['author'] == ''){\n                                request_service.formData['author'] = \"N/A\";\n                            }\n                            // For journal issues, put the ISSN in the ISBN field\n                            if (angular.isDefined(vm.search['rft.issn']) && vm.search['rft.issn'] != ''){\n                                request_service.formData['isbn'] = vm.search['rft.issn'] + ' (ISSN)';\n                            }\n                        }\n                        \n                      }\n                    }\n                  );\n                }\n              }\n        \n    }])\n    .component('prmBlankIllAfter', {\n        bindings: {parentCtrl: `<`},\n        controller: 'unigeIllOpenUrlController',\n        template: ''  \n    });\n","require('./js/unige-non-circulating-label.module.js')\nmodule.exports = 'unigeNonCirculatingLabel'","angular\n    .module('unigeNonCirculatingLabel', [])\n    .controller('unigeNonCirculatingLabelController', ['$scope', '$location', function ($scope,$location) {\n        var vm = this;\n        this.$onInit = function() {\n            \n            // Proceed only when holding locations details have been loaded\n            $scope.$watch(\n                function () {\n                    if (angular.isDefined(vm.parentCtrl.loc) && angular.isDefined(vm.parentCtrl.loc.items)) {\n                    return vm.parentCtrl.loc.items.length;\n                  }\n                  return 0;\n                },\n                function (newValue, oldValue) {\n                     if (newValue > 0) {\n                         \n                         console.log(vm.parentCtrl.loc);\n                         \n                         // If a user is connected, the loanable status display is correct\n                         if (vm.parentCtrl.isLoggedIn()){\n                             // Do nothing for now. Could possibly edit \n                             console.log('User is logged in, loanable status display correct.');\n                         }\n                         else {\n                             // If no user is logged in, Primo displays a \"not loanable\" status even if this may not be the case.\n                             // Replace that status with a note asking users to log in to get more info.\n                             \n                             console.log('Found some holdings to correct');\n                             \n                             var itemLocations = vm.parentCtrl.loc.items;\n                             \n                              for(var i = 0; i < itemLocations.length; i++){\n                                  itemLocations[i].itemFields[1] = 'Veuillez vous connecter pour savoir si le document est empruntable et connaitre la durée de prêt';\n                                  itemLocations[i]._additionalData.itemcategoryname = 'Veuillez vous connecter pour savoir si le document est empruntable et connaitre la durée de prêt';\n                                  // Not sure if this is reliable...\n                                  //console.log(itemLocations[i]);\n                              }\n                         }\n                     }\n                }\n            );\n        }\n    }])\n    .component('slspLocationItemsAfter', {\n        bindings: {parentCtrl: `<`},\n        controller: 'unigeNonCirculatingLabelController',\n        template: ''  \n    });"]}